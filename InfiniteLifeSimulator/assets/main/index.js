System.register("chunks:///_virtual/Achievement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(e){"use strict";var i,t,s,n,r,a;return{setters:[function(e){i=e.createForOfIteratorHelperLoose,t=e.createClass},function(e){s=e.cclegacy,n=e.Color},function(e){r=e.translations,a=e.CharacterBackground}],execute:function(){s._RF.push({},"d364eG8h7JEA7fIbtHQJ5Jn","Achievement",void 0);e("Achievement",function(){function e(e,i){var t;this.id=void 0,this.name=void 0,this.description=void 0,this.theme=void 0,this.hide=void 0,this.grade=void 0,this.conditions=void 0,this.satisfied=void 0,this.id=e.id,this.name=e.name,this.description=e.description,this.theme=null!=(t=e.theme)?t:r.zhCN.anyTheme,this.hide=e.hide,this.grade=e.grade,this.conditions=e.conditions,this.satisfied=this.isSatisfied(i)}return e.prototype.isSatisfied=function(e){var t=e.getStatistics(this.theme).lifeTimes;if(0==t)return!1;for(var s,n=!0,h=i(this.conditions);!(s=h()).done;){var o=s.value;if(-1!=o.indexOf(">")){var d=o.split(">")[0],l=parseInt(o.split(">")[1]);if("人生次数"==d)n=n&&t>l;else if("属性总和"==d)n=n&&e.getTotalAttributes("max",this.theme)>l;else for(var f,c=i(e.getNumberStatisticKeys(this.theme));!(f=c()).done;){var v=f.value;if(r.zhCN[v]==d){n=n&&e.getMaxStatistic(v,this.theme)>l;break}}}else if(-1!=o.indexOf("<")){var u=o.split("<")[0],m=parseInt(o.split("<")[1]);if("人生次数"==u)n=n&&t<m;else if("属性总和"==u)n=n&&e.getTotalAttributes("min",this.theme)<m;else for(var g,F=i(e.getNumberStatisticKeys(this.theme));!(g=F()).done;){var p=g.value;if(r.zhCN[p]==u){n=n&&e.getMinStatistic(p,this.theme)<m;break}}}else if(-1!=o.indexOf("==")){var C=o.split("==")[0],b=o.split("==")[1];if("性别"==C){var x,S=a[a.gender];n=n&&b in(null!=(x=e.getStatistics(this.theme)[S])?x:{})}else n="事件"==C?n&&-1!=e.getUniversalEvents(this.theme).indexOf(b):"特质"==C?n&&b in e.getTraitsWithEffect(this.theme):n&&!1}else if(-1!=o.indexOf("in")){var k=o.split("in")[0],w=o.split("in")[1];if("事件"==k){for(var E,O=JSON.parse(w),y=!1,A=i(O);!(E=A()).done;){var T=E.value;if(-1!=e.getUniversalEvents(this.theme).indexOf(T)){y=!0;break}}n=n&&y}else if("特质"==k){for(var N,J=JSON.parse(w),B=!1,I=i(J);!(N=I()).done;){if(N.value in e.getTraitsWithEffect(this.theme)){B=!0;break}}n=n&&B}else n=n&&!1}else n=n&&!1}return n},t(e,[{key:"achievementTileJson",get:function(){var e=[new n(192,192,192),new n("#F3FBCE"),new n("#CCF8FF"),new n("#FFF5D0")][this.grade];e.a=224;var i=[new n(128,128,128),new n("#E5F7A0"),new n("#99ECFF"),new n("#FFE7A1")][this.grade];return i.a=255,{key:this.id,icon:"",title:this.name,subtitle:this.hide&&!this.satisfied?"隐藏条件":this.description,trailing:"",theme:this.theme,grade:this.grade,hide:this.hide,conditions:this.conditions,satisfied:this.satisfied,selected:this.satisfied,backgroundColor:e,selectedBackgroundColor:i,textColor:new n("#FFFFFF"),selectedTextColor:new n("#FFFFFF")}}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/ChallengePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./MainPage.ts","./Global.ts"],(function(t){"use strict";var i,e,l,n,a,c,o,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,l=t._decorator,n=t.find,a=t.director},function(t){c=t.Page},function(t){o=t.MainPage},function(t){r=t.Global}],execute:function(){var s;e._RF.push({},"0a276hcYPFMpJpQRlOP72RA","ChallengePage",void 0);var g=l.ccclass;l.property,t("ChallengePage",g("ChallengePage")(s=function(t){function e(){for(var i,e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];return(i=t.call.apply(t,[this].concat(l))||this).ccClassName="ChallengePage",i.pageTitle="挑战",i.scrollViewPath="Canvas/ChallengePage/ScrollView",i.challenges=[{icon:"",title:"博学多识",subtitle:"获得博士学历",trailing:""},{icon:"",title:"事业有成",subtitle:"成为行业传奇",trailing:""},{icon:"",title:"天长地久",subtitle:"与初恋终老一生",trailing:""},{icon:"",title:"天伦之乐",subtitle:"实现四代同堂",trailing:""},{icon:"",title:"世界首富",subtitle:"财富达到1000亿",trailing:""},{icon:"",title:"长生不老",subtitle:"寿命达到150岁",trailing:""},{icon:"",title:"深藏不露*",subtitle:"获得10个特质",trailing:""},{icon:"",title:"多才多艺",subtitle:"获得10个技能",trailing:""},{icon:"",title:"爱好广泛*",subtitle:"获得10个偏好",trailing:""},{icon:"",title:"雄心壮志",subtitle:"达成10个目标",trailing:""},{icon:"",title:"门萨会员",subtitle:"智商达到150",trailing:""},{icon:"",title:"倾国倾城",subtitle:"颜值达到20",trailing:""},{icon:"",title:"八面玲珑*",subtitle:"情商达到20",trailing:""},{icon:"",title:"世界冠军*",subtitle:"体格达到20",trailing:""},{icon:"",title:"身强体壮*",subtitle:"健康达到20",trailing:""},{icon:"",title:"心满意足*",subtitle:"心理达到20",trailing:""},{icon:"",title:"人见人爱*",subtitle:"社交达到20",trailing:""},{icon:"",title:"名扬四海",subtitle:"名声达到20",trailing:""}],i}i(e,t);var l=e.prototype;return l.onLoad=function(){this.init(),this.initGridView(n(this.scrollViewPath+"/view/content"),this.challenges,3,3/4,!0)},l.start=function(){},l.onGridTileClicked=function(t,i){a.getScene().getComponentInChildren(r).initLife(i,i,null);var e=this.node.parent.getComponent(o);e.switchScene(e.lifeSimulatorScene)},e}(c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Character.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Defines.ts","./Trait.ts"],(function(e){"use strict";var t,a,i,l,s,r,n,h,u,o,f,y,m,b,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){i=e.cclegacy},function(e){l=e.CommonUtils},function(e){s=e.translations,r=e.eventStyleProbs,n=e.Gender,h=e.Race,u=e.MBTI,o=e.Talent,f=e.Origin,y=e.CharacterState,m=e.CharacterAttribute,b=e.CharacterBackground},function(e){c=e.Trait}],execute:function(){i._RF.push({},"16800Rn9VhCibRDcfPLw0Z/","Character",void 0);e("Character",function(){function e(e,t){this.name=void 0,this.gender=void 0,this.race=void 0,this.nationality=void 0,this.origin=void 0,this.personality=void 0,this.talent=void 0,this.states=void 0,this.age=void 0,this.wealth=void 0,this.attributes=void 0,this.theme=void 0,this.score=void 0,this.level=void 0,this.traitsWithEffect=void 0,this.init(t),this.fromJson(e)}var i=e.prototype;return i.fromJson=function(e){for(var a=0,i=Object.keys(e);a<i.length;a++){var l=i[a];if("traitsWithEffect"==l){this.traitsWithEffect=[];for(var s,r=t(e[l]);!(s=r()).done;){var n=s.value;this.traitsWithEffect.push(new c(n))}}else"attributes"==l?this.attributes=JSON.parse(JSON.stringify(e[l])):"states"==l?this.states=JSON.parse(JSON.stringify(e[l])):this[l]=e[l]}},i.init=function(a){this.theme=a,this.states={};for(var i,l=t(e.getStates(this.theme));!(i=l()).done;){var s=i.value;this.states[s.label]=s.defaultValue}this.age=0,this.wealth=0,this.attributes={};for(var r,n=t(e.getAttributes(this.theme));!(r=n()).done;){var h=r.value;this.attributes[h.label]=h.defaultValue}this.score=0,this.level=0,this.traitsWithEffect=[]},i.updateByBackground=function(){for(var t=e.getBackgroundToAttributes(this.theme),a=0,i=Object.keys(t[this.gender]);a<i.length;a++){var l=i[a];this.attributes[l]+=t[this.gender][l]}if(this.race in t)for(var s=0,r=Object.keys(t[this.race]);s<r.length;s++){var n=r[s];this.attributes[n]+=t[this.race][n]}for(var h=0,u=Object.keys(t[this.origin]);h<u.length;h++){var o=u[h];this.attributes[o]+=t[this.origin][o]}for(var f=0;f<this.personality.length;f++){var y=this.personality[f];if(y in t)for(var m in Object.keys(t[y]))this.attributes[m]+=t[y][m]}for(var b=0,c=Object.keys(t[this.talent]);b<c.length;b++){var d=c[b];this.attributes[d]+=t[this.talent][d]}},i.updateByEvent=function(e,t){var a;this.age=e.age,t?(a=e.selectedOption.getValidEffects(this.theme),this.score+=e.selectedOption.score,this.level+=1):a=e.getValidEffects(this.theme);for(var i=0,l=Object.keys(a);i<l.length;i++){var s=l[i],r=a[s];this.updateByEffect(s,r)}this.updateByTraits()},i.updateByEffect=function(e,a){var i=this.backgroundJsons.findIndex((function(t){return t.label==e}));if(-1!=i){var l=this.backgroundJsons[i];return a=a.split("->"),void(this[l.key]=a[a.length-1])}if(e in this.attributes)this.attributes[e]+=a;else if(e==s.zhCN.age)this.age+=a;else if(e==s.zhCN.wealth)this.wealth+=a;else if(e in this.states){var r=this.stateJsons.find((function(t){return t.label==e}));if("string"==r.type)a=a.split("->"),this.states[e]=a[a.length-1];else if("number"==r.type)this.states[e]+=a;else if("string[]"==r.type)if(-1!=a.indexOf("/"))for(var n,h=t(a.split("/"));!(n=h()).done;){var u=n.value;this.updateArrayState(e,u)}else-1!=a.indexOf("或")?(a=(a=a.split("或"))[Math.floor(Math.random()*a.length)],this.updateArrayState(e,a)):-1!=a.indexOf("->")?(this.updateArrayState(e,"-"+a.split("->")[0]),this.updateArrayState(e,a.split("->")[-1])):this.updateArrayState(e,a)}},i.updateByTraits=function(){for(var e,a={},i=t(this.backgroundJsons);!(e=i()).done;){var l=e.value;a[l.label]=l.value}for(var s,r=t(this.stateJsons);!(s=r()).done;){var n=s.value;a[n.label]=n.value}for(var h,u=t(this.attributeJsons);!(h=u()).done;){var o=h.value;a[o.label]=o.value}for(var f in this.traitsWithEffect){this.traitsWithEffect[f].updateCharacter(this,a)}},i.updateArrayState=function(e,t){void 0===t||t.length<=1||(t.startsWith("+")?(t=t.replace("+",""),-1==this.states[e].indexOf(t)&&this.states[e].push(t)):t.startsWith("-")?(t=t.replace("-",""),-1!=this.states[e].indexOf(t)&&this.states[e].splice(this.states[e].indexOf(t),1)):-1==this.states[e].indexOf(t)&&this.states[e].push(t))},i.getDeathAge=function(){var t=this.getEventCategoryProbs().tragedy,a=.75*this.attributes[s.zhCN.health]/20/t,i=.5*this.attributes[s.zhCN.mentality]/20/t,l=3*(this.score/this.level-5),r=Math.round(a+i+l);return e.getDefaultDeathAge(this.theme)+(r+1>0?r+1:0)},i.getEventCategoryProbs=function(){var a=this,i=.25,l=this.level>0?i*(this.score/this.level-5)/5:0,r=i*(this.age-40)/40,n=e.getBasicEventCategoryProbs(this.theme,l,r);this.gender==s.zhCN.male?(n.philosophy*=1.25,n.adventure*=1.25,n.horror*=1.25):this.gender==s.zhCN.female&&(n.emotion*=1.25,n.philosophy*=.75),this.race==s.zhCN.yellow?(n.life*=1.25,n.comedy*=1.25,n.tragedy*=.75):this.race==s.zhCN.white?(n.emotion*=1.25,n.tragedy*=.75,n.adventure*=1.25,n.horror*=.75):this.race==s.zhCN.black&&(n.tragedy*=1.25,n.adventure*=1.25,n.horror*=1.25);var h=e.getOrigins(this.theme).findIndex((function(e){return e.label==a.origin}));n.emotion*=1+i*(h-2),n.adventure*=1+i*(h-2),n.imagination*=1+i*(h-2),n.philosophy*=1-i*(h-2),n.story*=1-i*(h-2),n.tragedy*=1-i*(h-2),n.horror*=1-i*(h-2),""==this.theme&&(-1!=this.personality.indexOf("I")?n.philosophy*=1.25:-1!=this.personality.indexOf("E")&&(n.comedy*=1.25),-1!=this.personality.indexOf("S")?n.mystery*=1.25:-1!=this.personality.indexOf("N")&&(n.imagination*=1.25),-1!=this.personality.indexOf("T")?n.life*=1.25:-1!=this.personality.indexOf("F")&&(n.emotion*=1.25),-1!=this.personality.indexOf("J")?n.adventure*=1.25:-1!=this.personality.indexOf("P")&&(n.story*=1.25));for(var u,o=t(e.getTalents(this.theme));!(u=o()).done;){var f=u.value;if(this.talent==f.label)for(var y=0,m=Object.keys(f.effects);y<m.length;y++){var b=m[y];n[b]*=1+f.effects[b]*i}}for(var c,d=t(e.getStates(this.theme));!(c=d()).done;){var g=c.value;if("string[]"==g.type&&this.states[g.label].length>0)for(var p=0,C=Object.keys(g.effects);p<C.length;p++){var v=C[p];n[v]*=1+g.effects[v]*i}}if(this.age>18){var N=5e5*(this.age-18),z=Math.min(Math.max(this.wealth/N,-2),2);n.life*=1+i*z,n.tragedy*=1-i*z}for(var V,k=t(e.getAttributes(this.theme));!(V=k()).done;)for(var w=V.value,T=0,x=Object.keys(w.effects);T<x.length;T++){var S=x[T],O=this.attributes[w.label],A=w.maxValue-w.minValue,E=w.minValue+A/2;n[S]*=1+w.effects[S]*i*(O-E)/A}return n},i.getEventStyle=function(){var e=JSON.parse(JSON.stringify(r));e.life={"青春的":this.age<=22?1:0,"成长的":this.age<=31?1:0,"爱情的":this.age<=31?1:.5,"职业的":this.age<60?1:.5,"家庭的":1,"挑战性的":.5,"启发性的":.5,"创造性的":.5};var t=l.sampleFromProbDict(this.getEventCategoryProbs());return l.sampleFromProbDict(e[t])},i.getLifeScore=function(){var a=this.level>0?this.score*(5+this.level)/this.level:0;a+=10*Math.min(this.age/100,1);var i=this.wealth/1e7;a+=10*(i>1?1:i>-1?i:-1);for(var l,s=t(e.getAttributes(this.theme));!(l=s()).done;){var r=l.value,n=(this.attributes[r.label]-r.minValue)/(r.maxValue-r.minValue);a+=5*(n>1?1:n>-1?n:-1)}return Math.round(a)},i.getLifeDifficulty=function(){var a=this,i=0;i+=.5*(5-e.getOrigins(this.theme).findIndex((function(e){return e.label==a.origin})))/5,i+=.25*(this.talent==s.zhCN.none?1:0);for(var l,r=0,n=t(this.traitsWithEffect);!(l=n()).done;){r+=(3-l.value.grade)/3}return i+=.25*(r=this.traitsWithEffect.length>0?r/this.traitsWithEffect.length:1)},i.getBeginningId=function(){var a=this.gender==s.zhCN.female?s.zhCN.female:s.zhCN.male,i=s.zhCN.unknown;if(e.getPersonalities(this.theme).length>0){for(var r={},n=0;n<this.personality.length;n++)r[this.personality[n]]=1;i={I:"内倾型",E:"外倾型",N:"直觉型",S:"感觉型",F:"情感型",T:"思维型",P:"知觉型",J:"判断型"}[l.sampleFromProbDict(r)]}for(var h,u=[a,this.race,this.nationality,this.origin,this.talent,i],o=e.getAttributes(this.theme),f=t(o);!(h=f()).done;){var y=h.value;if(y.initial)if(""==this.theme||this.theme==s.zhCN.normalTheme)if(y.label==s.zhCN.iq){var m=s.zhCN.iq;this.attributes[s.zhCN.iq]<85?m+="70":this.attributes[s.zhCN.iq]<=115?m+="100":m+="130",u.push(m)}else y.label==s.zhCN.appearance?u.push(y.label+(this.attributes[y.label]<=10?"2":"12")):u.push(y.label+"2");else u.push(y.label+(this.attributes[y.label]<=10?"2":"12"))}return u.join("-")},e.getGenders=function(e){return[{key:n[n.male],label:s.zhCN.male},{key:n[n.female],label:s.zhCN.female}]},e.getRaces=function(e){return e===s.zhCN.xiuxianTheme||e===s.zhCN.martialArtsTheme||e===s.zhCN.cyberpunkTheme||e===s.zhCN.superpowersTheme?[{key:h[h.yellow],label:s.zhCN.yellow}]:e===s.zhCN.magicTheme?[{key:h[h.white],label:s.zhCN.white}]:e===s.zhCN.interstellarScifiTheme?[{key:"human",label:s.zhCN.human}]:e===s.zhCN.wastelandSurvivalTheme?[{key:h[h.yellow],label:s.zhCN.yellow}]:e===s.zhCN.westernCowboyTheme?[{key:h[h.white],label:s.zhCN.white}]:[{key:h[h.yellow],label:s.zhCN.yellow}]},e.getNationalities=function(e){return e===s.zhCN.xiuxianTheme||e===s.zhCN.martialArtsTheme||e===s.zhCN.cyberpunkTheme||e===s.zhCN.superpowersTheme?[{key:"china",label:s.zhCN.china}]:e===s.zhCN.magicTheme||e===s.zhCN.interstellarScifiTheme||e===s.zhCN.wastelandSurvivalTheme?[]:e===s.zhCN.westernCowboyTheme?[{key:"america",label:s.zhCN.america}]:[{key:"china",label:s.zhCN.china}]},e.getPersonalities=function(e){if(e===s.zhCN.xiuxianTheme)return[];if(e===s.zhCN.martialArtsTheme)return[];if(e===s.zhCN.cyberpunkTheme)return[];if(e===s.zhCN.superpowersTheme)return[];if(e===s.zhCN.magicTheme)return[];if(e===s.zhCN.interstellarScifiTheme)return[];if(e===s.zhCN.wastelandSurvivalTheme)return[];if(e===s.zhCN.westernCowboyTheme)return[];var t=[];for(var a in u)a.length>2&&t.push({key:a,label:a});return t},e.getTalents=function(e){return e===s.zhCN.xiuxianTheme||e===s.zhCN.martialArtsTheme||e===s.zhCN.cyberpunkTheme||e===s.zhCN.superpowersTheme||e===s.zhCN.magicTheme||e===s.zhCN.interstellarScifiTheme||e===s.zhCN.wastelandSurvivalTheme||e===s.zhCN.westernCowboyTheme?[{key:o[o.none],label:s.zhCN.none,effects:{tragedy:1},attributes:{}}]:[{key:o[o.none],label:s.zhCN.none,effects:{tragedy:1},attributes:{}},{key:o[o.language],label:s.zhCN.languageTalent,effects:{emotion:1},attributes:{"情商":2}},{key:o[o.logic],label:s.zhCN.logicTalent,effects:{philosophy:1},attributes:{"智商":5}},{key:o[o.visual],label:s.zhCN.visualTalent,effects:{imagination:1},attributes:{"智商":2,"情商":1}},{key:o[o.music],label:s.zhCN.musicTalent,effects:{imagination:1},attributes:{"智商":2,"情商":1}},{key:o[o.interpersonal],label:s.zhCN.interpersonalTalent,effects:{emotion:1},attributes:{"情商":1,"外貌":1}},{key:o[o.selfAwareness],label:s.zhCN.selfAwarenessTalent,effects:{life:1},attributes:{"情商":1,"心理":1}},{key:o[o.nature],label:s.zhCN.natureTalent,effects:{mystery:1},attributes:{"智商":5}},{key:o[o.physical],label:s.zhCN.physicalTalent,effects:{adventure:1},attributes:{"体格":2}}]},e.getOrigins=function(e){return e===s.zhCN.xiuxianTheme?[{label:"凡人",attributes:{"智谋":0,"灵性":0,"气运":0,"法力":0,"体魄":0}},{label:"乡野道士",attributes:{"智谋":1,"灵性":1,"气运":1,"法力":1,"体魄":1}},{label:"门派弟子",attributes:{"智谋":2,"灵性":2,"气运":2,"法力":2,"体魄":2}},{label:"名门弟子",attributes:{"智谋":3,"灵性":3,"气运":3,"法力":3,"体魄":3}},{label:"宗门传人",attributes:{"智谋":4,"灵性":4,"气运":4,"法力":4,"体魄":4}}]:e===s.zhCN.martialArtsTheme?[{label:"凡人",attributes:{"智谋":0,"攻击":0,"防御":0,"内力":0,"体魄":0}},{label:"浪子游侠",attributes:{"智谋":1,"攻击":1,"防御":1,"内力":1,"体魄":1}},{label:"门派弟子",attributes:{"智谋":2,"攻击":2,"防御":2,"内力":2,"体魄":2}},{label:"宗门传人",attributes:{"智谋":3,"攻击":3,"防御":3,"内力":3,"体魄":3}},{label:"宗师之才",attributes:{"智谋":4,"攻击":4,"防御":4,"内力":4,"体魄":4}}]:e===s.zhCN.cyberpunkTheme?[{label:"罪犯",attributes:{"智力":0,"身体":0,"技术":0,"反应":0,"镇定":0}},{label:"流浪者",attributes:{"智力":1,"身体":1,"技术":1,"反应":1,"镇定":1}},{label:"贫民",attributes:{"智力":2,"身体":2,"技术":2,"反应":2,"镇定":2}},{label:"中产",attributes:{"智力":3,"身体":3,"技术":3,"反应":3,"镇定":3}},{label:"寡头",attributes:{"智力":4,"身体":4,"技术":4,"反应":4,"镇定":4}}]:e===s.zhCN.superpowersTheme?[{label:"凡人",attributes:{"智力":0,"力量":0,"感知":0,"念力":0,"变异":0}},{label:"弱能力者",attributes:{"智力":1,"力量":1,"感知":1,"念力":1,"变异":1}},{label:"异能力者",attributes:{"智力":2,"力量":2,"感知":2,"念力":2,"变异":2}},{label:"强能力者",attributes:{"智力":3,"力量":3,"感知":3,"念力":3,"变异":3}},{label:"超能力者",attributes:{"智力":4,"力量":4,"感知":4,"念力":4,"变异":4}}]:e===s.zhCN.magicTheme?[{label:"凡人",attributes:{"智谋":0,"体魄":0,"感知":0,"魔力":0,"咒语":0}},{label:"魔法学徒",attributes:{"智谋":1,"体魄":1,"感知":1,"魔力":1,"咒语":1}},{label:"混血巫师",attributes:{"智谋":2,"体魄":2,"感知":2,"魔力":2,"咒语":2}},{label:"纯血巫师",attributes:{"智谋":3,"体魄":3,"感知":3,"魔力":3,"咒语":3}},{label:"领主传人",attributes:{"智谋":4,"体魄":4,"感知":4,"魔力":4,"咒语":4}}]:e===s.zhCN.interstellarScifiTheme?[{label:"罪犯",attributes:{"智力":0,"身体":0,"技术":0,"战斗":0,"魅力":0}},{label:"流浪者",attributes:{"智力":1,"身体":1,"技术":1,"战斗":1,"魅力":1}},{label:"普通船员",attributes:{"智力":2,"身体":2,"技术":2,"战斗":2,"魅力":2}},{label:"星际贵族",attributes:{"智力":3,"身体":3,"技术":3,"战斗":3,"魅力":3}},{label:"种族领袖",attributes:{"智力":4,"身体":4,"技术":4,"战斗":4,"魅力":4}}]:e===s.zhCN.wastelandSurvivalTheme?[{label:"荒野孤儿",attributes:{"生存":0,"身体":0,"手艺":0,"战斗":0,"洞察":0}},{label:"废土流民",attributes:{"生存":1,"身体":1,"手艺":1,"战斗":1,"洞察":1}},{label:"普通幸存者",attributes:{"生存":2,"身体":2,"手艺":2,"战斗":2,"洞察":2}},{label:"末日精英",attributes:{"生存":3,"身体":3,"手艺":3,"战斗":3,"洞察":3}},{label:"末日领袖",attributes:{"生存":4,"身体":4,"手艺":4,"战斗":4,"洞察":4}}]:e===s.zhCN.westernCowboyTheme?[{label:"罪犯",attributes:{"智谋":0,"身体":0,"射击":0,"马术":0,"应变":0}},{label:"流浪者",attributes:{"智谋":1,"身体":1,"射击":1,"马术":1,"应变":1}},{label:"平民",attributes:{"智谋":2,"身体":2,"射击":2,"马术":2,"应变":2}},{label:"农场主",attributes:{"智谋":3,"身体":3,"射击":3,"马术":3,"应变":3}},{label:"商业大亨",attributes:{"智谋":4,"身体":4,"射击":4,"马术":4,"应变":4}}]:[{key:f[f.poor],label:s.zhCN.poor,attributes:{"外貌":0,"体格":0,"心理":0}},{key:f[f.wellOff],label:s.zhCN.wellOff,attributes:{"外貌":1,"体格":1,"心理":1}},{key:f[f.middleClass],label:s.zhCN.middleClass,attributes:{"外貌":1,"体格":1,"心理":1}},{key:f[f.upperClass],label:s.zhCN.upperClass,attributes:{"外貌":2,"体格":2,"心理":2}},{key:f[f.wealthy],label:s.zhCN.wealthy,attributes:{"外貌":2,"体格":2,"心理":2}}]},e.getStates=function(e){var t={key:y[y.career],label:s.zhCN.career,type:"string",defaultValue:"无",icon:"FontAwesome/briefcase/spriteFrame"},a={key:y[y.love],label:s.zhCN.love,type:"string",defaultValue:"单身",icon:"FontAwesome/heart-pulse/spriteFrame"},i={key:y[y.family],label:s.zhCN.family,type:"string",defaultValue:"正常",icon:"FontAwesome/people-roof/spriteFrame"},l={key:y[y.traits],label:s.zhCN.traits,type:"string[]",defaultValue:[],effects:{story:1}},r={key:y[y.skills],label:s.zhCN.skills,type:"string[]",defaultValue:[],effects:{tragedy:-1}};return e===s.zhCN.xiuxianTheme?[{key:"realm",label:"境界",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"techniques",label:"技法",type:"string[]",defaultValue:[],effects:{adventure:1}},{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}}]:e===s.zhCN.martialArtsTheme?[{key:"sect",label:"门派",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"martialArts",label:"武功",type:"string[]",defaultValue:[],effects:{adventure:1}},{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}}]:e===s.zhCN.cyberpunkTheme?[{key:"sect",label:"流派",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"prostheses",label:"义体",type:"string[]",defaultValue:[],effects:{story:1}},{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}}]:e===s.zhCN.superpowersTheme?[{key:"identity",label:"身份",type:"string",defaultValue:"默默无闻",icon:""},t,a,i,l,r,{key:"superpowers",label:"超能力",type:"string[]",defaultValue:[],effects:{mystery:1}},{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}}]:e===s.zhCN.magicTheme?[{key:"status",label:"地位",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"spells",label:"法术",type:"string[]",defaultValue:[],effects:{mystery:1}},{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}}]:e===s.zhCN.interstellarScifiTheme?[{key:"faction",label:"派系",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"starships",label:"舰船",type:"string[]",defaultValue:[],effects:{story:1}},{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}}]:e===s.zhCN.wastelandSurvivalTheme?[{key:"team",label:"团队",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}},{key:"supplies",label:"物资",type:"string[]",defaultValue:[],effects:{mystery:1}}]:e===s.zhCN.westernCowboyTheme?[{key:"wanted",label:"通缉",type:"string",defaultValue:"无",icon:""},t,a,i,l,r,{key:"weapons",label:"武器",type:"string[]",defaultValue:[],effects:{adventure:1}},{key:"horses",label:"马匹",type:"string[]",defaultValue:[],effects:{story:1}}]:[{key:"education",label:"学历",type:"string",defaultValue:"无",icon:"FontAwesome/graduation-cap/spriteFrame"},t,a,i,l,r,{key:"preferences",label:"偏好",type:"string[]",defaultValue:[],effects:{emotion:1}},{key:"goals",label:"目标",type:"string[]",defaultValue:[],effects:{life:1}}]},e.getAttributes=function(e){var t={key:m[m.health],label:s.zhCN.health,initial:!1,minValue:0,maxValue:20,defaultValue:10,effects:{life:1,tragedy:-1}},a={key:m[m.mentality],label:s.zhCN.mentality,initial:!1,minValue:0,maxValue:20,defaultValue:10,effects:{philosophy:1,tragedy:-1}},i={key:m[m.reputation],label:s.zhCN.reputation,initial:!1,minValue:0,maxValue:20,defaultValue:0,effects:{story:1}};return e===s.zhCN.xiuxianTheme?[{key:"wisdom",label:"智谋",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"physique",label:"体魄",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"spirit",label:"灵性",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"luck",label:"气运",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"mana",label:"法力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},t,a,i]:e===s.zhCN.martialArtsTheme?[{key:"wisdom",label:"智谋",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"physique",label:"体魄",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"attack",label:"攻击",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"defence",label:"防御",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"internal",label:"内力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},t,a,i]:e===s.zhCN.cyberpunkTheme?[{key:"intelligence",label:"智力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"physique",label:"身体",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"technique",label:"技术",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{imagination:1,tragedy:-1}},{key:"reaction",label:"反应",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,tragedy:-1}},{key:"composure",label:"镇定",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},t,a,i]:e===s.zhCN.superpowersTheme?[{key:"intelligence",label:"智力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"strength",label:"力量",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"perception",label:"感知",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"mindfulness",label:"念力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{mystery:1,tragedy:-1}},{key:"mutation",label:"变异",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{imagination:1,tragedy:-1}},t,a,i]:e===s.zhCN.magicTheme?[{key:"wisdom",label:"智谋",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"physique",label:"体魄",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"perception",label:"感知",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"mana",label:"魔力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{mystery:1,tragedy:-1}},{key:"spell",label:"咒语",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{imagination:1,tragedy:-1}},t,a,i]:e===s.zhCN.interstellarScifiTheme?[{key:"intelligence",label:"智力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"physique",label:"身体",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"technique",label:"技术",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{imagination:1,tragedy:-1}},{key:"fighting",label:"战斗",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"charisma",label:"魅力",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{emotion:1,tragedy:-1}},t,a,i]:e===s.zhCN.wastelandSurvivalTheme?[{key:"survival",label:"生存",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,tragedy:-1}},{key:"physique",label:"身体",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"craftsmanship",label:"手艺",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{emotion:1,tragedy:-1}},{key:"fighting",label:"战斗",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,tragedy:-1}},{key:"insight",label:"洞察",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,life:-1}},t,a,i]:e===s.zhCN.westernCowboyTheme?[{key:"wisdom",label:"智谋",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{philosophy:1,life:-1}},{key:"physique",label:"身体",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,life:-1}},{key:"shooting",label:"射击",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{adventure:1,tragedy:-1}},{key:"equestrian",label:"马术",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{story:1,tragedy:-1}},{key:"strain",label:"应变",initial:!0,minValue:0,maxValue:20,defaultValue:0,effects:{emotion:1,tragedy:-1}},t,a,i]:[{key:m[m.iq],label:s.zhCN.iq,initial:!0,minValue:40,maxValue:160,defaultValue:100,effects:{life:1,tragedy:-1}},{key:m[m.appearance],label:s.zhCN.appearance,initial:!0,minValue:0,maxValue:20,defaultValue:4,effects:{emotion:1}},{key:m[m.eq],label:s.zhCN.eq,initial:!0,minValue:0,maxValue:20,defaultValue:2,effects:{emotion:1,tragedy:-1}},{key:m[m.physique],label:s.zhCN.physique,initial:!0,minValue:0,maxValue:20,defaultValue:2,effects:{adventure:1}},t,a,i,{key:m[m.social],label:s.zhCN.social,initial:!1,minValue:0,maxValue:20,defaultValue:0,effects:{emotion:1}}]},e.getBackgroundToAttributes=function(a){var i,l={};if(a===s.zhCN.xiuxianTheme)(i={})[s.zhCN.male]={"智谋":1,"体魄":1},i[s.zhCN.female]={"灵性":1,"法力":1},i[s.zhCN.yellow]={"智谋":1,"灵性":1},i[s.zhCN.white]={"体魄":1,"气运":1},i[s.zhCN.black]={"体魄":1,"法力":1},l=i;else if(a===s.zhCN.martialArtsTheme){var r;(r={})[s.zhCN.male]={"智谋":1,"体魄":1},r[s.zhCN.female]={"防御":1,"内力":1},r[s.zhCN.yellow]={"智谋":1,"内力":1},r[s.zhCN.white]={"体魄":1,"防御":1},r[s.zhCN.black]={"体魄":1,"攻击":1},l=r}else if(a===s.zhCN.cyberpunkTheme){var n;(n={})[s.zhCN.male]={"身体":1,"技术":1},n[s.zhCN.female]={"反应":1,"镇定":1},n[s.zhCN.yellow]={"智力":1,"技术":1},n[s.zhCN.white]={"技术":1,"反应":1},n[s.zhCN.black]={"身体":1,"反应":1},l=n}else if(a===s.zhCN.superpowersTheme){var h;(h={})[s.zhCN.male]={"智力":1,"力量":1},h[s.zhCN.female]={"感知":1,"念力":1},h[s.zhCN.yellow]={"智力":1,"感知":1},h[s.zhCN.white]={"力量":1,"念力":1},h[s.zhCN.black]={"力量":1,"变异":1},l=h}else if(a===s.zhCN.magicTheme){var u;(u={})[s.zhCN.male]={"智谋":1,"体魄":1},u[s.zhCN.female]={"感知":1,"咒语":1},u[s.zhCN.yellow]={"智谋":1,"咒语":1},u[s.zhCN.white]={"体魄":1,"感知":1},u[s.zhCN.black]={"体魄":1,"魔力":1},l=u}else if(a===s.zhCN.interstellarScifiTheme){var o;(o={})[s.zhCN.male]={"智力":1,"身体":1},o[s.zhCN.female]={"技术":1,"魅力":1},o[s.zhCN.yellow]={"智力":1,"技术":1},o[s.zhCN.white]={"身体":1,"魅力":1},o[s.zhCN.black]={"身体":1,"战斗":1},l=o}else if(a===s.zhCN.wastelandSurvivalTheme){var f;(f={})[s.zhCN.male]={"生存":1,"身体":1},f[s.zhCN.female]={"手艺":1,"洞察":1},f[s.zhCN.yellow]={"手艺":1,"洞察":1},f[s.zhCN.white]={"身体":1,"手艺":1},f[s.zhCN.black]={"身体":1,"战斗":1},l=f}else if(a===s.zhCN.westernCowboyTheme){var y;(y={})[s.zhCN.male]={"智谋":1,"身体":1},y[s.zhCN.female]={"马术":1,"应变":1},y[s.zhCN.yellow]={"智谋":1,"应变":1},y[s.zhCN.white]={"身体":1,"射击":1},y[s.zhCN.black]={"身体":1,"马术":1},l=y}else{var m;(m={})[s.zhCN.male]={"智商":2,"体格":1},m[s.zhCN.female]={"情商":1,"外貌":1},m[s.zhCN.yellow]={"智商":2,"情商":1},m[s.zhCN.white]={"体格":1,"外貌":1},m[s.zhCN.black]={"体格":2},m.I={"心理":1,"智商":2},m.E={"外貌":2},m.S={"智商":5},m.N={"情商":2},m.T={"智商":5},m.F={"情商":2},m.J={"体格":2},m.P={"心理":1,"智商":2},l=m}for(var b,c=t(e.getOrigins(a));!(b=c()).done;){var d=b.value;l[d.label]=d.attributes}for(var g,p=t(e.getTalents(a));!(g=p()).done;){var C=g.value;l[C.label]=C.attributes}return l},e.getBasicEventCategoryProbs=function(e,t,a){return e===s.zhCN.xiuxianTheme||e===s.zhCN.martialArtsTheme?{life:.1*(1+a),comedy:.125*(1-a),emotion:.1*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.1*(1+t)*(1-a),adventure:.15*(1+t)*(1-a),imagination:.075*(1-a),mystery:.1*(1-a),horror:.075*(1-a)}:e===s.zhCN.cyberpunkTheme?{life:.1*(1+a),comedy:.1*(1-a),emotion:.1*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.1*(1+t)*(1-a),adventure:.15*(1+t)*(1-a),imagination:.1*(1-a),mystery:.1*(1-a),horror:.075*(1-a)}:e===s.zhCN.superpowersTheme?{life:.075*(1+a),comedy:.1*(1-a),emotion:.1*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.125*(1+t)*(1-a),adventure:.15*(1+t)*(1-a),imagination:.1*(1-a),mystery:.1*(1-a),horror:.075*(1-a)}:e===s.zhCN.magicTheme?{life:.075*(1+a),comedy:.1*(1-a),emotion:.1*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.125*(1+t)*(1-a),adventure:.15*(1+t)*(1-a),imagination:.075*(1-a),mystery:.125*(1-a),horror:.075*(1-a)}:e===s.zhCN.interstellarScifiTheme?{life:.1*(1+a),comedy:.125*(1-a),emotion:.1*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.1*(1+t)*(1-a),adventure:.125*(1+t)*(1-a),imagination:.1*(1-a),mystery:.1*(1-a),horror:.075*(1-a)}:e===s.zhCN.wastelandSurvivalTheme?{life:.075*(1+a),comedy:.075*(1-a),emotion:.1*(1+a),tragedy:.125*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.125*(1+t)*(1-a),adventure:.15*(1+t)*(1-a),imagination:.075*(1-a),mystery:.1*(1-a),horror:.1*(1-a)}:e===s.zhCN.westernCowboyTheme?{life:.1*(1+a),comedy:.125*(1-a),emotion:.1*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.125*(1+t)*(1-a),adventure:.15*(1+t)*(1-a),imagination:.075*(1-a),mystery:.075*(1-a),horror:.075*(1-a)}:{life:.175*(1+t)*(1+a),comedy:.15*(1+t)*(1-a),emotion:.125*(1+t)*(1+a),tragedy:.1*(1-t)*(1+a),philosophy:.075*(1-t)*(1+a),story:.075*(1-a),adventure:.075*(1-a),imagination:.075*(1-a),mystery:.075*(1-a),horror:.075*(1-a)}},e.getDefaultDeathAge=function(e){return e===s.zhCN.xiuxianTheme?75:e===s.zhCN.martialArtsTheme||e===s.zhCN.cyberpunkTheme?65:e===s.zhCN.superpowersTheme||e===s.zhCN.magicTheme?70:e===s.zhCN.interstellarScifiTheme?75:(e===s.zhCN.wastelandSurvivalTheme||s.zhCN.westernCowboyTheme,65)},e.isLateDecision=function(e,t){return void 0===t&&(t=null),e!==s.zhCN.xiuxianTheme&&(e!==s.zhCN.martialArtsTheme&&(e!==s.zhCN.cyberpunkTheme&&(e!==s.zhCN.superpowersTheme&&(e!==s.zhCN.magicTheme&&(e!==s.zhCN.interstellarScifiTheme&&(e!==s.zhCN.wastelandSurvivalTheme&&(e!==s.zhCN.westernCowboyTheme&&t[s.zhCN.iq]>=100)))))))},a(e,[{key:"toJson",get:function(){for(var e,a=[],i=t(this.traitsWithEffect);!(e=i()).done;){var l=e.value;a.push(l.tileJson)}return{name:this.name,gender:this.gender,race:this.race,nationality:this.nationality,origin:this.origin,personality:this.personality,talent:this.talent,states:JSON.parse(JSON.stringify(this.states)),age:this.age,wealth:this.wealth,attributes:JSON.parse(JSON.stringify(this.attributes)),score:this.score,level:this.level,traitsWithEffect:a}}},{key:"backgroundJsons",get:function(){return[{type:"string",key:b[b.name],label:s.zhCN.name,value:this.name},{type:"string",key:b[b.gender],label:s.zhCN.gender,value:this.gender},{type:"string",key:b[b.race],label:s.zhCN.race,value:this.race},{type:"string",key:b[b.nationality],label:s.zhCN.nationality,value:this.nationality},{type:"string",key:b[b.origin],label:s.zhCN.origin,value:this.origin},{type:"string",key:b[b.personality],label:s.zhCN.personality,value:this.personality},{type:"string",key:b[b.talent],label:s.zhCN.talent,value:this.talent}]}},{key:"stateJsons",get:function(){for(var a,i=e.getStates(this.theme),l=t(i);!(a=l()).done;){var r=a.value;r.value=this.states[r.label]}return i.push({type:"number",key:y[y.wealth],label:s.zhCN.wealth,icon:"FontAwesome/sack-dollar/spriteFrame",value:this.wealth},{type:"number",key:y[y.age],label:s.zhCN.age,icon:"",value:this.age}),i}},{key:"attributeJsons",get:function(){for(var a,i=e.getAttributes(this.theme),l=t(i);!(a=l()).done;){var s=a.value;s.value=this.attributes[s.label]}return i}},{key:"originIndex",get:function(){var t=this;return e.getOrigins(this.theme).findIndex((function(e){return e.label==t.origin}))}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterListTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./CommonUtils.ts"],(function(t){"use strict";var e,r,a,n,i,o,c,h,s,l,g,C,m;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,a=t._decorator,n=t.resources,i=t.SpriteFrame,o=t.Sprite,c=t.UITransform,h=t.Label,s=t.Color,l=t.Component},function(t){g=t.translations,C=t.CharacterState},function(t){m=t.CommonUtils}],execute:function(){var u;r._RF.push({},"4e4b80XZupG26ul+P+T3PC4","CharacterListTile",void 0);var d=a.ccclass;a.property,t("CharacterListTile",d("CharacterListTile")(u=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).character=null,e.textColor=new s("#FFFFFF"),e}e(r,t);var a=r.prototype;return a.start=function(){this.init()},a.init=function(){this.updateContent()},a.updateContent=function(){var t,e=this,r=this.node.getChildByName("Avatar");t=this.character.age<=6?this.character.gender==g.zhCN.female?"baby-girl":"baby-boy":this.character.age<=12?this.character.gender==g.zhCN.female?"kid-girl":"kid-boy":this.character.age<=18?this.character.gender==g.zhCN.female?"teenager-girl-1":"teenager-boy-1":this.character.age<=40?this.character.gender==g.zhCN.female?"woman-1":"man-1":this.character.age<=60?this.character.gender==g.zhCN.female?"woman-4":"man-4":this.character.gender==g.zhCN.female?"grandmother-1":"grandfather-1",n.load("images/avatar/"+t+"/spriteFrame",i,(function(t,e){r.getComponent(o).spriteFrame=e,r.getComponent(c).width=48,r.getComponent(c).height=48}));var a=this.node.getChildByName("Content").getChildByName("Title"),s=this.node.getChildByName("Content").getChildByName("Subtitle"),l=this.node.getChildByName("Trailing"),u=a.getComponentsInChildren(h),d=[this.character.name,this.character.gender,this.character.race,this.character.origin,""];for(var f in d)u[f].string=d[f],u[f].color=this.textColor;var p=this.character.stateJsons.filter((function(t){return"string[]"!=t.type})),v=s.getComponentsInChildren(h),y=s.getComponentsInChildren(o),b=function(t){var r=p[t],a=!(r.icon&&""!=r.icon),o="";o=r.key==C[C.wealth]?m.formatNumber(r.value):r.value.toString().length>5?r.value.toString().substring(0,4)+"……":r.value.toString(),v[t].string=(a?r.label+"：":"")+o+"  ",v[t].color=e.textColor,a?y[t].node.active=!1:n.load(r.icon,i,(function(e,r){y[t].node.active=!0,y[t].spriteFrame=r}))};for(var N in v)b(N);var F=l.active?l.getComponent(h):u[u.length-1];F.string=this.character.age.toString()+"岁",F.color=this.textColor},r}(l))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Tabbar.ts","./CommonUtils.ts"],(function(e){"use strict";var t,n,a,r,o,i,l,s,c,h,u,d,C,g,p,v;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,r=e._decorator,o=e.Label,i=e.ProgressBar,l=e.EventHandler,s=e.UITransform,c=e.Sprite,h=e.Color,u=e.Component},function(e){d=e.CharacterInfoTypes,C=e.CharacterState,g=e.CharacterBackground},function(e){p=e.Tabbar},function(e){v=e.CommonUtils}],execute:function(){var b;a._RF.push({},"278138e20hMKYP7x4l/AwMT","CharacterPanel",void 0);var f=r.ccclass;r.property,e("CharacterPanel",f("CharacterPanel")(b=function(e){function a(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).ccClassName="CharacterPanel",t.character=null,t.tabs=[{key:d[d.Attribute],label:"属性"},{key:d[d.State],label:"状态"},{key:d[d.Background],label:"背景"}],t.textColor=new h("#FFFFFF"),t.labelBackgroundColor=new h(96,96,96),t.fontSize=20,t.padding=8,t}t(a,e);var r=a.prototype;return r.start=function(){this.init()},r.init=function(){var e=this.node.getComponentInChildren(p);e.getComponent(p).tabs=this.tabs;for(var t,a=[],r=n(this.tabs);!(t=r()).done;){var o=t.value;a.push(this.createEventHandler("onTabbarClicked",o.key))}e.getComponent(p).clickEventHandlers=a,e.getComponent(p).init(),this.onTabbarClicked(null,this.tabs[0].key),this.updateContent()},r.updateContent=function(){for(var e=this.character.backgroundJsons,t=this.character.stateJsons,n=this.character.attributeJsons,a=0,r=[d.Attribute,d.State,d.Background];a<r.length;a++){var l=r[a],s=this.node.getChildByName(d[l]+"Grid");if(l==d.Attribute){var c=s.children;for(var h in c){var u=c[h],p=n[h];u.getComponentsInChildren(o)[0].string=p.label,u.getComponentsInChildren(o)[0].color=this.textColor,u.getComponentInChildren(i).progress=p.value/p.maxValue,u.getComponentsInChildren(o)[1].string=p.value.toString(),u.getComponentsInChildren(o)[1].color=this.textColor}}else if(l==d.State){var b=s.children;for(var f in b){var m=b[f],y=t[f],k="";if("string"==y.type)k=y.label+"："+y.value;else if("number"==y.type)y.key==C[C.wealth]?k=y.label+"："+v.formatNumber(y.value):y.key==C[C.age]&&(m.active=!1);else if("string[]"==y.type){var I=y.value;k=I.length>2&&I.join("；").length>12?y.label+"："+I.slice(0,2).join("；")+"……":I.length>0?y.label+"："+I.join("；"):y.label+"：无"}this.updateLabel(m,k)}}else if(l==d.Background){var S=s.children;for(var w in S){var B=S[w],F=e[w];F.key!=g[g.nationality]?this.updateLabel(B,F.label+"："+F.value):B.active=!1}}}},r.createEventHandler=function(e,t){var n=new l;return n.target=this.node,n.component=this.ccClassName,n.handler=e,n.customEventData=t,n},r.onTabbarClicked=function(e,t){for(var n=0,a=[d[0],d[1],d[2]];n<a.length;n++){var r=a[n];this.node.getChildByName(r+"Grid").active=t==r}},r.updateLabel=function(e,t){e.getComponentInChildren(o).string=t,e.getComponentInChildren(o).color=this.textColor,e.getComponent(s).width=this.fontSize*t.length+2*this.padding,e.getComponentInChildren(c).node.getComponent(s).width=this.fontSize*t.length+2*this.padding,e.getComponentInChildren(c).color=new h(96,96,96)},a}(u))||b);a._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"7dd7avMqr1BhKvuqTUopVy0","CommonUtils",void 0);e("CommonUtils",function(){function e(){}return e.sampleFromProbDict=function(e){for(var t=0,n=0,i=Object.keys(e);n<i.length;n++){t+=e[i[n]]}for(var r=Math.random()*t,s=0,o="",l=0,a=Object.keys(e);l<a.length;l++){var u=a[l];if(r<=(s+=e[u])){o=u;break}}return o},e.checkConditions=function(e,n){for(var i,r=!0,s=t(n);!(i=s()).done;){var o=i.value;if(o.includes("==")){var l=e[o.split("==")[0]],a=o.split("==")[1];r="string"==typeof l?l==a:"number"==typeof l?l==parseInt(a):"boolean"==typeof l&&l==("true"==a)}else if(o.includes("!=")){var u=e[o.split("!=")[0]],f=o.split("!=")[1];r="string"==typeof u?u!=f:"number"==typeof u?u!=parseInt(f):"boolean"==typeof u&&u!=("true"==f)}else if(o.includes("<=")){var c=e[o.split("<=")[0]],p=o.split("<=")[1];r="string"==typeof c?c<=p:"number"==typeof c&&c<=parseInt(p)}else if(o.includes(">=")){var g=e[o.split(">=")[0]],y=o.split(">=")[1];r="string"==typeof g?g>=y:"number"==typeof g&&g>=parseInt(y)}else if(o.includes("<")){var v=e[o.split("<")[0]],d=o.split("<")[1];r="string"==typeof v?v<d:"number"==typeof v&&v<parseInt(d)}else if(o.includes(">")){var m=e[o.split(">")[0]],h=o.split(">")[1];r="string"==typeof m?m>h:"number"==typeof m&&m>parseInt(h)}else if(o.includes("not in")){var b=e[o.split("not in")[1]],M=o.split("not in")[0];r=b instanceof Array?-1==b.indexOf(M):"object"==typeof b&&!(M in b)}else if(o.includes("in")){var F=e[o.split("in")[1]],H=o.split("in")[0];r=F instanceof Array?-1!=F.indexOf(H):"object"==typeof F&&!(H in F)}if(!r)break}return r},e.formatDate=function(e,t){var n={yyyy:e.getFullYear(),yy:(""+e.getFullYear()).slice(-2),M:e.getMonth()+1,MM:("0"+(e.getMonth()+1)).slice(-2),d:e.getDate(),dd:("0"+e.getDate()).slice(-2),H:e.getHours(),HH:("0"+e.getHours()).slice(-2),h:e.getHours()%12,hh:("0"+e.getHours()%12).slice(-2),m:e.getMinutes(),mm:("0"+e.getMinutes()).slice(-2),s:e.getSeconds(),ss:("0"+e.getSeconds()).slice(-2),w:["日","一","二","三","四","五","六"][e.getDay()]};return t.replace(/([a-z]+)/gi,(function(e){return n[e]}))},e.formatNumber=function(e){var t,n={},i=1e4,r=Math.abs(e);return r<i?(n.value=r,n.unit=""):(t=Math.floor(Math.log(r)/Math.log(i)),n.value=(r/Math.pow(i,t)).toFixed(2),n.unit=["","万","亿","万亿"][t]),(e<0?"-":"")+n.value+n.unit},e.isSameDay=function(e,t){return!(!e||!t)&&(e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear())},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoundRect.ts"],(function(t){"use strict";var e,o,n,i,r,l,a,s,c,d,u,h,p,C,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,s=t.Color,c=t.UITransform,d=t.resources,u=t.SpriteFrame,h=t.Sprite,p=t.Label,C=t.Button,g=t.Component},function(t){m=t.RoundRect}],execute:function(){var f,b,v,w,y,B,R;l._RF.push({},"a05fcmc0JJF04gEQUcgMcws","CustomButton",void 0);var k=a.ccclass,F=a.property;t("CustomButton",(f=k("CustomButton"),b=F({}),v=F({}),f((B=e((y=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"icon",B,i(e)),n(e,"label",R,i(e)),e.padding=8,e.backgroundColor=new s(96,96,96,255),e.selectedBackgroundColor=new s(160,160,160,255),e.textColor=new s(255,255,255),e.selectedTextColor=new s(255,255,255),e}o(e,t);var l=e.prototype;return l.start=function(){this.init()},l.init=function(){this.onSelected(!1);var t=this.node.getChildByName("Button"),e=t.getChildByName("Row"),o=this.node.getComponent(c).width,n=this.node.getComponent(c).height;t.getComponent(c).width=o,t.getComponent(c).height=n,e.getComponent(c).width=o,e.getComponent(c).height=n,this.node.getComponent(m).radius=Math.min(o,n)/4;var i=e.getChildByName("Sprite");this.icon?d.load(this.icon,u,(function(t,e){i.getComponent(h).spriteFrame=e})):i.active=!1;var r=e.getChildByName("Label");r.getComponent(p).string=this.label,r.getComponent(c).width=o-(this.icon?i.getComponent(c).width+this.padding:0)-2*this.padding},l.addEventHandler=function(t){this.node.getComponentInChildren(C).getComponent(C).clickEvents.push(t)},l.onSelected=function(t){for(var e,o=this.node.getComponentsInChildren(p),n=r(o);!(e=n()).done;){e.value.color=t?this.selectedTextColor:this.textColor}var i=this.node.getComponentInChildren(C),l=t?this.selectedBackgroundColor:this.backgroundColor;i.normalColor=l,i.disabledColor=new s(i.disabledColor.r,i.disabledColor.g,i.disabledColor.b,l.a)},e}(g)).prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=e(y.prototype,"label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=y))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/CustomCharacterPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainPage.ts","./Defines.ts","./Page.ts","./Tabbar.ts","./Character.ts","./CustomSlider.ts","./Global.ts","./ListTile.ts","./CommonUtils.ts","./CustomButton.ts"],(function(t){"use strict";var e,i,n,a,r,l,o,s,d,h,c,u,g,C,v,f,b,m,p,k,T,S,B,A,y,P;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.director,o=t.Label,s=t.Widget,d=t.Slider,h=t.instantiate,c=t.UITransform,u=t.Button,g=t.find},function(t){C=t.MainPage},function(t){v=t.translations,f=t.GameMode,b=t.CharacterBackground,m=t.CharacterAttribute},function(t){p=t.Page},function(t){k=t.Tabbar},function(t){T=t.Character},function(t){S=t.CustomSlider},function(t){B=t.Global},function(t){A=t.ListTile},function(t){y=t.CommonUtils},function(t){P=t.CustomButton}],execute:function(){var N;a._RF.push({},"7c574jY7tpH6KYRgsRsfhLg","CustomCharacterPage",void 0);var w=r.ccclass;r.property,t("CustomCharacterPage",w("CustomCharacterPage")(N=function(t){function a(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).ccClassName="CustomCharacterPage",e.pageTitle="创建角色",e.initialized=!1,e.lifeSetting=void 0,e.character=void 0,e.selectedTraits=[],e.traits=[],e}e(a,t);var r=a.prototype;return r.onLoad=function(){this.init();var t=l.getScene().getComponentInChildren(B);this.lifeCoinLabel.getComponent(o).string=t.saving.lifeCoin.toString()+v.zhCN.lifeCoin,this.lifeCoinLabel.getComponent(o).color=this.textColor,this.lifeCoinLabel.parent.getComponent(s).right=this.margin;var e=this.attributePanel.children[0],i=e.children[1].getChildByName("RandomButton").getComponent(P);i.label="随机分配",i.addEventHandler(this.createEventHandler("onRandomAttributeButtonClicked",""));var n=e.children[1].getChildByName("ResetButton").getComponent(P);n.label="重置属性",n.addEventHandler(this.createEventHandler("onResetAttributeButtonClicked",""));var a=this.traitPanel.children[0],r=a.children[1].getChildByName("RandomButton").getComponent(P);r.label="随机抽取",r.addEventHandler(this.createEventHandler("onRandomTraitButtonClicked",""));var d=a.children[1].getChildByName("ResetButton").getComponent(P);d.label="重置特质",d.addEventHandler(this.createEventHandler("onResetTraitButtonClicked",""));var h=this.rewardedAdButton;t.lifeSetting.interactive?(h.active=t.saving.videoAdAvailable&&!t.saving.autoNextYearAvailable,this.rewardedAdLabel.active=t.saving.videoAdAvailable&&!t.saving.autoNextYearAvailable,this.rewardedAdLabel.getComponent(o).string="观看广告，解锁2小时自动点击下一年按钮！"):(h.active=t.saving.videoAdAvailable&&!t.saving.playSpeed4Available,this.rewardedAdLabel.active=t.saving.videoAdAvailable&&!t.saving.playSpeed4Available,this.rewardedAdLabel.getComponent(o).string="观看广告，解锁2小时4倍速观看人生！"),h.getComponent(P).label="去解锁",h.getComponent(P).addEventHandler(this.createEventHandler("onRewardedAdButtonClicked",""));var c=this.nextStepButton.getComponent(P);c.label="开启人生",c.addEventHandler(this.createEventHandler("onNextButtonClicked",""))},r.onEnable=function(){var t=this;this.initData();var e=this.backgroundPanel;if(e.active=this.lifeSetting.customBackground,this.lifeSetting.customBackground){var n=e.children[0];this.initPanelTitle(n,null);for(var a,r=function(){var i=a.value,n=e.getChildByName(i.node);if(i.tabs.length<=1)n&&(n.active=!1);else if(i.key!=b[b.origin]||t.lifeSetting.isMoreOrigin)if(i.key!=b[b.talent]||t.lifeSetting.isMoreTalent)t.initBackgroundTabbar(n,i.tabs,i.handler,i.constraintNum,t.initialized);else{var r=[v.zhCN.none,v.zhCN.languageTalent,v.zhCN.logicTalent,v.zhCN.physicalTalent];t.initBackgroundTabbar(n,i.tabs.filter((function(t){return-1!=r.indexOf(t.label)})),i.handler,i.constraintNum,t.initialized)}else t.initBackgroundTabbar(n,i.tabs.slice(0,3),i.handler,i.constraintNum,t.initialized)},l=i(this.backgrounds);!(a=l()).done;)r()}var o=this.attributePanel,s=o.children[0];this.initPanelTitle(s.children[0],null);var c=o.children[1];for(var u in c.getComponentInChildren(d).slideEvents=[],o.removeAllChildren(),o.addChild(s),this.attributes)this.initAttributeSlider(u,h(c),!1,null,null);var g=this.traitPanel,C=g.children[0];for(var f in this.initPanelTitle(C.children[0],"特质抽卡 "+this.selectedTraits.length.toString()+"/"+this.lifeSetting.maxTraitDrawNum.toString()),g.removeAllChildren(),g.addChild(C),this.traits)this.initTraitListTile(f,h(this.listTilePrefab),!1);this.initialized=!0,this.scheduleOnce((function(){t.onRandomAttributeButtonClicked(null,null)}),.02)},r.initData=function(){var t=l.getScene().getComponentInChildren(B);this.lifeSetting=t.lifeSetting,this.traits=this.lifeSetting.getTraits(t.traits,t.restartTraits),this.selectedTraits=[];for(var e=t.saving.getBeginnings(this.lifeSetting.theme),i=0,n=null;i<=50;){i+=1,n=this.createCharacter();var a=e.indexOf(n.getBeginningId()),r=this.lifeSetting.gameMode==f[f.themeMode]?100:500;if(this.lifeSetting.customBackground||-1==a||!(e.length-a<r))break}this.character=n},r.createCharacter=function(){var t,e=((t={})[b[b.name]]=v.zhCN.you,t);if(this.lifeSetting.customBackground)for(var n,a=i(this.backgrounds);!(n=a()).done;){var r=n.value;0==r.tabs.length?e[r.key]=v.zhCN.unknown:e[r.key]=r.tabs[0].label}else for(var l,o=i(this.backgrounds);!(l=o()).done;){var s=l.value;if(0==s.tabs.length)e[s.key]=v.zhCN.unknown;else{for(var d,h={},c=i(s.tabs);!(d=c()).done;){var u=d.value;h[u.label]=u.prob}e[s.key]=y.sampleFromProbDict(h)}}return new T(e,this.lifeSetting.theme)},r.initBackgroundTabbar=function(t,e,n,a,r){t.getComponentInChildren(o).color=this.textColor;var l=t.getComponentInChildren(k);if(l.tabs=e,l.padding=12,e.length>a){l.constraintNum=a;var s=Math.ceil(e.length/l.constraintNum);t.getComponent(c).height=40*s+(s+1)*this.padding}if(!r){for(var d,h=[],u=i(e);!(d=u()).done;){var g=d.value;h.push(this.createEventHandler(n,g.label))}l.clickEventHandlers=h}},r.initAttributeSlider=function(t,e,i,n,a){var r=this.attributes[t];e.getComponentInChildren(d).progress=null!=n?n:0;var l=e.getComponent(S);if(l.label=r.label,l.maxValue=null!=a?a:this.lifeSetting.maxAttributeValue,l.sliderWidth=this.node.getComponent(c).width-180,l.onSliderChanged(null,""),!i){var o=this.createEventHandler("onAttrSliderChanged",t);e.getComponentInChildren(d).slideEvents.push(o),this.attributePanel.addChild(e)}this.onAttrSliderChanged(null,t)},r.initTraitListTile=function(t,e,i){var n=this.traits[t].tileJson,a=e.getComponent(A);if(a.avatar="FontAwesome/check/spriteFrame",a.title=n.title,a.trailing=n.trailing,a.backgroundColor=n.backgroundColor,a.selectedBackgroundColor=n.selectedBackgroundColor,a.textColor=n.textColor,a.selectedTextColor=n.selectedTextColor,!i){var r=e.getChildByName("Row").getChildByName("Avatar");r.getComponent(c).width=28,r.getComponent(c).height=28,r.active=!1,a.getComponent(u).clickEvents.push(this.createEventHandler("onTraitListTileClicked",t)),this.traitPanel.addChild(e)}},r.onBackButtonClicked=function(t,e){var i=this.node.parent.getComponent(C);this.lifeSetting.gameMode==f[f.themeMode]&&(l.getScene().getComponentInChildren(B).nextPageUrl=i.themePageUrl);i.pageLength>1?i.popPage():i.switchScene(i.mainMenuScene)},r.onGenderTabbarClicked=function(t,e){this.character.gender=e},r.onRaceTabbarClicked=function(t,e){this.character.race=e},r.onOriginTabbarClicked=function(t,e){this.character.origin=e},r.onPersonalityTabbarClicked=function(t,e){this.character.personality=e},r.onTalentTabbarClicked=function(t,e){this.character.talent=e},r.onAttrSliderChanged=function(t,e){var i=e,n=0;for(var a in this.attributes)if(a!=i){var r=this.attributes[a];r.key==m[m.iq]?n+=(this.character.attributes[r.label]-this.lifeSetting.minIq)/this.lifeSetting.iqStep:n+=this.character.attributes[r.label]}var l=this.lifeSetting.getTotalAttributeValue(this.selectedTraits),o=Math.min(this.lifeSetting.maxAttributeValue,l-n),s=this.attributePanel.children[parseInt(i)+1];s.getComponent(S).maxValue=o;var h=Math.floor(s.getComponentInChildren(d).progress*o),c=this.attributes[i];c.key==m[m.iq]?this.character.attributes[c.label]=this.lifeSetting.minIq+this.lifeSetting.iqStep*h:this.character.attributes[c.label]=h;var u=this.attributePanel.children[0].children[0];this.initPanelTitle(u,"分配属性 "+(n+h).toString()+"/"+l.toString())},r.onTraitListTileClicked=function(t,e){var i=e,n=this.traits[i],a=-1!=this.selectedTraits.findIndex((function(t){return t.id==n.id}));if(a||!(this.selectedTraits.length>=this.lifeSetting.maxTraitDrawNum)){var r=this.traitPanel.children[parseInt(i)+1];if(a)r.getComponent(A).onSelected(!1),r.getChildByName("Row").getChildByName("Avatar").active=!1,r.getComponent(A).updateLayout(),this.selectedTraits=this.selectedTraits.filter((function(t){return t.id!=n.id}));else r.getComponent(A).onSelected(!0),r.getChildByName("Row").getChildByName("Avatar").active=!0,r.getComponent(A).updateLayout(),this.selectedTraits.push(n);var l=this.traitPanel.children[0].children[0];for(var o in this.initPanelTitle(l,"特质抽卡 "+this.selectedTraits.length.toString()+"/"+this.lifeSetting.maxTraitDrawNum.toString()),this.attributes){this.onAttrSliderChanged(null,o),this.attributePanel.children[parseInt(o)+1].getComponent(S).onSliderChanged(null,"")}}},r.onRandomAttributeButtonClicked=function(t,e){var i=0,n=this.lifeSetting.getTotalAttributeValue(this.selectedTraits);for(var a in this.attributes)this.character.attributes[this.attributes[a].label]=0;for(var r in this.attributes){var l=Math.min(this.lifeSetting.maxAttributeValue,n-i),o=parseInt(r)==this.attributes.length-1?l:Math.floor(Math.random()*l);this.character.attributes[this.attributes[r].label]=o,i+=o;var s=this.attributePanel.children[parseInt(r)+1],h=l>0?o/l:1;this.initAttributeSlider(r,s,!0,h,l),s.getComponentInChildren(d).progress=1}},r.onResetAttributeButtonClicked=function(t,e){for(var i in this.attributes){this.character.attributes[this.attributes[i].label]=0;var n=this.attributePanel.children[parseInt(i)+1];this.initAttributeSlider(i,n,!0,null,null)}},r.onRandomTraitButtonClicked=function(t,e){var i=this,n={};for(var a in this.traits){var r=this.traits[a];n[r.id]=r.grade+1}var l=this.lifeSetting.maxTraitDrawNum+1;l=l>=this.traits.length?Math.floor((1+Math.random())*(this.traits.length-1)/2):l;for(var o=[];o.length<l&&l<this.traits.length-1;){var s=y.sampleFromProbDict(n);-1==o.indexOf(s)&&o.push(s)}var d=function(){var t=i.traits[h];-1!=i.selectedTraits.findIndex((function(e){return e.id==t.id}))!=(-1!=o.indexOf(t.id.toString()))&&i.onTraitListTileClicked(null,h)};for(var h in this.traits)d()},r.onResetTraitButtonClicked=function(t,e){var i=this,n=function(){var t=i.traits[a];-1!=i.selectedTraits.findIndex((function(e){return e.id==t.id}))&&i.onTraitListTileClicked(null,a)};for(var a in this.traits)n()},r.onNextButtonClicked=function(t,e){var n=l.getScene().getComponentInChildren(B);if(this.lifeSetting.gameMode!=f[f.sandboxMode]||n.saving.customLifeCost(this.lifeSetting)){for(var a,r=i(this.selectedTraits);!(a=r()).done;){var o=a.value;this.character.states[v.zhCN.traits].push(o.tileJson.title),this.character.traitsWithEffect.push(o)}this.character.updateByTraits(),this.character.updateByBackground(),n.character=this.character,n.initialCharacter=this.character.toJson;var s=this.node.parent.getComponent(C);s.pushPage(s.lifeSimulatorPage)}},r.onRewardedAdButtonClicked=function(t,e){var i=this;this.watchRewardedVideo((function(t,e,n){if(t)console.error(t);else{var a=l.getScene().getComponentInChildren(B);a.lifeSetting.interactive?n?(a.saving.videoAdToAutoNextYear(n),i.rewardedAdButton.active=!1,i.rewardedAdLabel.active=!1):e&&a.saving.videoAdToAutoNextYear(n):n?(a.saving.videoAdToPlaySpeed4(n),i.rewardedAdButton.active=!1,i.rewardedAdLabel.active=!1):e&&a.saving.videoAdToPlaySpeed4(n)}}))},n(a,[{key:"scrollContentPath",get:function(){return"Canvas/CustomCharacterPage/ScrollView/view/content"}},{key:"backgroundPanel",get:function(){return g(this.scrollContentPath+"/BackgroundPanel")}},{key:"attributePanel",get:function(){return g(this.scrollContentPath+"/AttributePanel")}},{key:"traitPanel",get:function(){return g(this.scrollContentPath+"/TraitPanel")}},{key:"nextStepButton",get:function(){return g(this.scrollContentPath+"/ButtonColumn/NextButton")}},{key:"rewardedAdButton",get:function(){return g(this.scrollContentPath+"/ButtonColumn/RewardedAdButton")}},{key:"rewardedAdLabel",get:function(){return g(this.scrollContentPath+"/RewardedAdLabel")}},{key:"lifeCoinLabel",get:function(){return g("Canvas/CustomCharacterPage/TopBar/Trailing/LifeCoinLabel")}},{key:"backgrounds",get:function(){for(var t=[{key:b[b.gender],constraintNum:4,node:"",handler:"",tabs:[]},{key:b[b.race],constraintNum:4,node:"",handler:"",tabs:[]},{key:b[b.nationality],constraintNum:4,node:"",handler:"",tabs:[]},{key:b[b.origin],constraintNum:5,node:"",handler:"",tabs:[]},{key:b[b.personality],constraintNum:4,node:"",handler:"",tabs:[]},{key:b[b.talent],constraintNum:4,node:"",handler:"",tabs:[]}],e=0,i=t;e<i.length;e++){var n=i[e];n.node=n.key[0].toUpperCase()+n.key.substring(1)+"Tabbar",n.handler="on"+n.key[0].toUpperCase()+n.key.substring(1)+"TabbarClicked",n.tabs=this.lifeSetting.getBackgroundValues(n.key)}return t}},{key:"attributes",get:function(){return T.getAttributes(this.lifeSetting.theme).filter((function(t){return t.initial}))}}]),a}(p))||N);a._RF.pop()}}}));

System.register("chunks:///_virtual/CustomLifePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainPage.ts","./Page.ts","./Tabbar.ts","./CustomSlider.ts","./Global.ts","./CustomButton.ts","./Defines.ts"],(function(t){"use strict";var e,n,i,a,l,o,r,s,u,h,g,c,f,d,C,b,p,S,v,m;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){a=t.cclegacy,l=t._decorator,o=t.director,r=t.Label,s=t.Widget,u=t.UITransform,h=t.Slider,g=t.instantiate,c=t.Button,f=t.find},function(t){d=t.MainPage},function(t){C=t.Page},function(t){b=t.Tabbar},function(t){p=t.CustomSlider},function(t){S=t.Global},function(t){v=t.CustomButton},function(t){m=t.translations}],execute:function(){var y;a._RF.push({},"ab650+TVRdOIYr9VjuNAaqz","CustomLifePage",void 0);var k=l.ccclass;l.property,t("CustomLifePage",k("CustomLifePage")(y=function(t){function a(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).ccClassName="CustomLifePage",e.pageTitle="创建人生",e.scrollContentPath="Canvas/CustomLifePage/ScrollView/view/content",e.lifeSetting=null,e.saving=null,e}e(a,t);var l=a.prototype;return l.onLoad=function(){this.init();var t=o.getScene().getComponentInChildren(S);this.lifeSetting=t.lifeSetting,this.saving=t.saving,this.lifeCoinLabel.getComponent(r).string=this.saving.lifeCoin.toString()+m.zhCN.lifeCoin,this.lifeCoinLabel.getComponent(r).color=this.textColor,this.lifeCoinLabel.parent.getComponent(s).right=this.margin;var e=this.settingPanel,i=e.children[0];this.initPanelTitle(i,null);for(var a,l=n(this.settings);!(a=l()).done;){var u=a.value;this.initSettingTabbar(e.getChildByName(u.key),u.tabs,u.handler)}var h=this.lifeStylePanel,g=h.children[0];this.initPanelTitle(g,null);var c=this.lifeSetting.lifeStyleJsons;for(var f in c)this.initLifeStyleSlider(f,c[f],h);this.remindLabel.getComponent(r).color=this.textColor,this.nextStepButton.getComponent(v).label="下一步",this.nextStepButton.getComponent(v).addEventHandler(this.createEventHandler("onNextButtonClicked",""))},l.start=function(){},l.initSettingTabbar=function(t,e,i){t.getComponentInChildren(r).color=this.textColor;var a=t.getComponentInChildren(b);a.tabs=e,a.padding=this.padding;for(var l,o=[],s=n(e);!(l=s()).done;){var u=l.value;o.push(this.createEventHandler(i,u.key))}a.clickEventHandlers=o},l.onInteractionTabbarClicked=function(t,e){this.lifeSetting.interactive="true"==e},l.onBackgroundTabbarClicked=function(t,e){this.lifeSetting.customBackground="true"==e,this.updateNextButton()},l.onAttributeTabbarClicked=function(t,e){this.lifeSetting.unlimitedAttributes="true"==e,this.updateNextButton()},l.onTraitTabbarClicked=function(t,e){this.lifeSetting.unlimitedTraits="true"==e,this.updateNextButton()},l.initLifeStyleSlider=function(t,e,n){var i=n.getChildByName("LifeStyleSlider"+(parseInt(t)+1).toString()),a=i.getComponent(p);a.label=e.label,a.initialValue=e.value,a.maxValue=e.values.length-1,a.sliderWidth=this.node.getComponent(u).width-180,a.valueTexts=e.values;var l=this.createEventHandler("onLifeStyleSliderChanged",e.key);i.getComponentInChildren(h).slideEvents.push(l)},l.onLifeStyleSliderChanged=function(t,e){var n=this.lifeSetting.lifeStyleJsons.findIndex((function(t){return t.key==e})),i=this.lifeSetting.lifeStyleJsons[n],a=this.lifeStylePanel.getChildByName("LifeStyleSlider"+(n+1).toString()),l=Math.floor(a.getComponentInChildren(h).progress*i.values.length);this.lifeSetting[e+"Weight"]=l>=i.values.length?i.values.length-1:l},l.onNextButtonClicked=function(t,e){if(this.isWeixin){if(!(this.lifeSetting.getCustomLifeCost()>this.saving.lifeCoin)){var n=this.node.parent.getComponent(d);n.pushPage(n.customCharacterPageUrl)}}else{var i=g(this.weixinPopupPrefab);this.node.addChild(i)}},l.updateNextButton=function(){var t=this.lifeSetting.getCustomLifeCost();t>this.saving.lifeCoin?(this.nextStepButton.getComponentInChildren(c).interactable=!1,this.nextStepButton.getComponent(v).label="点数不足"):(this.nextStepButton.getComponentInChildren(c).interactable=!0,this.nextStepButton.getComponent(v).label=t>0?t+"点数":"下一步"),this.nextStepButton.getComponent(v).init()},i(a,[{key:"settingPanel",get:function(){return f(this.scrollContentPath+"/SettingPanel")}},{key:"lifeStylePanel",get:function(){return f(this.scrollContentPath+"/LifeStylePanel")}},{key:"remindLabel",get:function(){return f(this.scrollContentPath+"/RemindLabel")}},{key:"nextStepButton",get:function(){return f(this.scrollContentPath+"/NextButton")}},{key:"lifeCoinLabel",get:function(){return f("Canvas/CustomLifePage/TopBar/Trailing/LifeCoinLabel")}},{key:"settings",get:function(){return[{key:"InteractionTabbar",handler:"onInteractionTabbarClicked",tabs:[{key:"false",label:"仅观看"},{key:"true",label:"可选择"}]},{key:"BackgroundTabbar",handler:"onBackgroundTabbarClicked",tabs:[{key:"false",label:"随机"},{key:"true",label:"自定义"}]},{key:"AttributeTabbar",handler:"onAttributeTabbarClicked",tabs:[{key:"false",label:"总和20点"},{key:"true",label:"不限总和"}]},{key:"TraitTabbar",handler:"onTraitTabbarClicked",tabs:[{key:"false",label:"10选3"},{key:"true",label:"任意选择"}]}]}}]),a}(C))||y);a._RF.pop()}}}));

System.register("chunks:///_virtual/CustomSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,l,o,s,r,a,h;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,l=e.Label,o=e.Slider,s=e.UITransform,r=e.EventHandler,a=e.Color,h=e.Component}],execute:function(){var d;n._RF.push({},"d451afMn4xIeoTXMFeJYUE3","CustomSlider",void 0);var u=i.ccclass;i.property,e("CustomSlider",u("CustomSlider")(d=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this).ccClassName="CustomSlider",t.label=null,t.initialValue=0,t.maxValue=1,t.sliderWidth=300,t.valueTexts=null,t.keyLabelColor=new a(255,255,255),t.valueLabelColor=new a(255,255,255),t}t(n,e);var i=n.prototype;return i.start=function(){this.init()},i.init=function(){if(this.label){var e=this.node.getComponentsInChildren(l)[0];e.string=this.label,e.color=this.keyLabelColor}var t=this.node.getComponentInChildren(o);t.node.getComponent(s).width=this.sliderWidth,t.node.getChildByName("Handle").setPosition(-this.sliderWidth/2,t.node.getChildByName("Handle").position.y),t.progress=this.initialValue/this.maxValue;var n=this.createEventHandler("onSliderChanged",this.label);this.node.getComponentInChildren(o).slideEvents.push(n),this.onSliderChanged(null,this.label)},i.createEventHandler=function(e,t){var n=new r;return n.target=this.node,n.component=this.ccClassName,n.handler=e,n.customEventData=t,n},i.onSliderChanged=function(e,t){var n=this.node.getComponentInChildren(o),i=this.node.getComponentsInChildren(l)[1];if(this.valueTexts){var s=Math.floor(n.progress*this.valueTexts.length);i.string=this.valueTexts[s<this.valueTexts.length?s:this.valueTexts.length-1]}else i.string=Math.floor(n.progress*this.maxValue).toString();i.color=this.valueLabelColor},n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/DataUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,a,s;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy,s=e.sys}],execute:function(){a._RF.push({},"c85f4fy+u9MNIT3gapDLDwF","DataUtils",void 0);e("DataUtil",function(){function e(){this.app=null,this.isWeixin?(wx.cloud.init({env:"infinite-life-simulator-6bb8ee78"}),console.log("infinite-life-simulator-6bb8ee78")):this.app=cloudbase.init({env:"infinite-life-simulator-6bb8ee78",appSign:"touristappid",appSecret:{appAccessKeyId:"1",appAccessKey:"c182be417a73c8054b805d1e9c3b2b71"}})}var a=e.prototype;return a.anonymousLogin=function(){var e=n(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.app.auth({persistence:"local"}),e.next=3,t.anonymousAuthProvider().signIn();case 3:return e.next=5,t.getLoginState();case 5:n=e.sent,console.log(n.isAnonymousAuth);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getEventDbName=function(e,t){return"LifeEvent"+{"":"女性"==t.split("-")[0]?"Female":"Male","普通":"女性"==t.split("-")[0]?"Female":"Male","修仙":"Xiuxian","武侠":"MartialArts","赛博朋克":"Cyberpunk","超能力":"Superpowers","魔法":"Magic","星际科幻":"InterstellarScifi","废土求生":"WastelandSurvival","西部牛仔":"WesternCowboy"}[e]},a.getBeginningEvents=function(e,t,n){var i,a=t.getBeginningId(),s=this.getEventDbName(e,a);console.log(s,a);var o=(i=this.isWeixin?wx.cloud.database():this.app.database()).command;i.collection(s).where({beginningId:o.eq(a),level:o.eq(0)}).get().then((function(e){n(null,e.data)}))},a.getEventsByOption=function(e,t,n,i,a){var s,o=this.getEventDbName(e,t),r=(s=this.isWeixin?wx.cloud.database():this.app.database()).command;s.collection(o).where({beginningId:r.eq(t),segmentId:r.eq(n)}).get().then((function(e){a(null,e.data)}))},a.getLifeDecisions=function(e,t,n,i){var a,s=this.getEventDbName(e,n[0]),o=(a=this.isWeixin?wx.cloud.database():this.app.database()).command;a.collection(s).where({beginningId:o.in(n),level:o.eq(t),isDecision:o.eq(!0)}).get().then((function(e){i(null,e.data)}))},t(e,[{key:"isWeixin",get:function(){return"WECHAT_GAME"===s.platform}}]),e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){var t,i,n,o,r,l,s,c,u,h,d,m;e({CharacterAttribute:void 0,CharacterBackground:void 0,CharacterInfoTypes:void 0,CharacterState:void 0,GameMode:void 0,Gender:void 0,LifeStyle:void 0,MBTI:void 0,Nationality:void 0,Origin:void 0,Race:void 0,Talent:void 0}),a._RF.push({},"b2194bs4LFMi49KjmLd4f12","Defines",void 0),function(e){e[e.watchMode=0]="watchMode",e[e.classicMode=1]="classicMode",e[e.sandboxMode=2]="sandboxMode",e[e.challengeMode=3]="challengeMode",e[e.themeMode=4]="themeMode",e[e.storyMode=5]="storyMode"}(t||(t=e("GameMode",{}))),function(e){e[e.positivity=0]="positivity",e[e.imagination=1]="imagination",e[e.narrative=2]="narrative",e[e.laughter=3]="laughter",e[e.emotion=4]="emotion",e[e.depth=5]="depth"}(i||(i=e("LifeStyle",{}))),function(e){e[e.Attribute=0]="Attribute",e[e.State=1]="State",e[e.Background=2]="Background"}(n||(n=e("CharacterInfoTypes",{}))),function(e){e[e.name=0]="name",e[e.gender=1]="gender",e[e.race=2]="race",e[e.nationality=3]="nationality",e[e.origin=4]="origin",e[e.personality=5]="personality",e[e.talent=6]="talent"}(o||(o=e("CharacterBackground",{}))),function(e){e[e.education=0]="education",e[e.career=1]="career",e[e.love=2]="love",e[e.family=3]="family",e[e.wealth=4]="wealth",e[e.age=5]="age",e[e.traits=6]="traits",e[e.skills=7]="skills",e[e.preferences=8]="preferences",e[e.goals=9]="goals"}(r||(r=e("CharacterState",{}))),function(e){e[e.iq=0]="iq",e[e.appearance=1]="appearance",e[e.eq=2]="eq",e[e.physique=3]="physique",e[e.health=4]="health",e[e.mentality=5]="mentality",e[e.social=6]="social",e[e.reputation=7]="reputation"}(l||(l=e("CharacterAttribute",{}))),function(e){e[e.male=0]="male",e[e.female=1]="female"}(s||(s=e("Gender",{}))),function(e){e[e.yellow=0]="yellow",e[e.white=1]="white",e[e.black=2]="black"}(c||(c=e("Race",{}))),function(e){e[e.China=0]="China",e[e.foreign=1]="foreign"}(u||(u=e("Nationality",{}))),function(e){e[e.poor=0]="poor",e[e.wellOff=1]="wellOff",e[e.middleClass=2]="middleClass",e[e.upperClass=3]="upperClass",e[e.wealthy=4]="wealthy"}(h||(h=e("Origin",{}))),function(e){e[e.ISTJ=0]="ISTJ",e[e.ISFJ=1]="ISFJ",e[e.INFJ=2]="INFJ",e[e.INTJ=3]="INTJ",e[e.ISTP=4]="ISTP",e[e.ISFP=5]="ISFP",e[e.INFP=6]="INFP",e[e.INTP=7]="INTP",e[e.ESTP=8]="ESTP",e[e.ESFP=9]="ESFP",e[e.ENFP=10]="ENFP",e[e.ENTP=11]="ENTP",e[e.ESTJ=12]="ESTJ",e[e.ESFJ=13]="ESFJ",e[e.ENFJ=14]="ENFJ",e[e.ENTJ=15]="ENTJ"}(d||(d=e("MBTI",{}))),function(e){e[e.none=0]="none",e[e.language=1]="language",e[e.logic=2]="logic",e[e.visual=3]="visual",e[e.music=4]="music",e[e.interpersonal=5]="interpersonal",e[e.selfAwareness=6]="selfAwareness",e[e.nature=7]="nature",e[e.physical=8]="physical"}(m||(m=e("Talent",{})));e("eventStyleProbs",{life:{"青春的":1,"成长的":1,"爱情的":1,"职业的":1,"家庭的":1,"挑战性的":.5,"启发性的":.5,"创造性的":.5},comedy:{"搞笑的":1,"爆笑的":1,"幽默的":1,"戏谑的":.5,"滑稽的":1,"吐槽的":1,"整活的":1,"风趣的":.5,"诙谐的":1,"讽刺的":1,"夸张的":1,"无厘头的":1,"黑色幽默的":1},emotion:{"感人的":1,"浪漫的":1,"幸运的":1,"励志的":1,"美好的":1,"轻松的":.5,"畅快的":.5,"暖心的":1,"开心的":1,"纯真的":.5,"惊喜的":1},tragedy:{"挣扎的":1,"遗憾的":1,"沉重的":1,"悲壮的":1,"不幸的":1,"悲伤的":1,"失败的":1,"难受的":.5,"悲剧的":1,"痛苦的":1,"可耻的":.5},philosophy:{"神圣的":.5,"随性的":.5,"哲学的":1,"诗意的":.5,"好奇的":.5,"复杂的":1,"纠结的":1,"深刻的":1,"真实的":.5},story:{"有趣的":1,"悬疑的":1,"离奇的":1,"戏剧性的":1,"反传统的":.5,"一波三折的":1,"扣人心弦的":1,"出人意料的":1},adventure:{"动作的":1,"冒险的":1,"英雄的":1,"刺激的":1,"震撼的":1,"紧张的":1,"大胆的":1,"狂野的":.5,"热血的":.5},imagination:{"科幻的":1,"奇幻的":1,"玄幻的":1,"超自然的":1,"超现实的":1,"难以置信的":1,"奇思妙想的":1,"天马行空的":1,"异想天开的":1,"脑洞大开的":1},horror:{"可怕的":1,"惊险的":1,"诡异的":1,"惊悚的":1,"恐怖的":1,"灾难的":1,"危险的":1,"暴力的":1,"令人窒息的":1,"令人不安的":1},mystery:{"神秘的":1,"梦幻的":1,"神奇的":1,"奇怪的":1,"独特的":1,"荒诞的":1,"神经质的":.5,"神话般的":.5}}),e("translations",{zhCN:{name:"姓名",gender:"性别",race:"种族",nationality:"国籍",origin:"出身",personality:"人格",talent:"天赋",education:"学历",career:"职业",love:"爱情",family:"家庭",wealth:"财富",age:"年龄",traits:"特质",skills:"技能",preferences:"偏好",goals:"目标",realm:"境界",techniques:"技法",weapons:"武器",sect:"门派",martialArts:"武功",prostheses:"义体",identity:"身份",superpowers:"超能力",status:"地位",spells:"法术",faction:"派系",starships:"舰船",team:"团队",supplies:"物资",wanted:"通缉",horses:"马匹",iq:"智商",intelligence:"智力",appearance:"颜值",eq:"情商",physique:"体格",health:"健康",mentality:"心理",social:"社交",reputation:"名声",wisdom:"智谋",spirit:"灵性",luck:"气运",mana:"法力",attack:"攻击",defence:"防御",internal:"内力",technique:"技术",reaction:"反应",composure:"镇定",strength:"力量",perception:"感知",mindfulness:"念力",mutation:"变异",spell:"咒语",fighting:"战斗",charisma:"魅力",survival:"生存",craftsmanship:"手艺",insight:"洞察",shooting:"射击",equestrian:"马术",strain:"应变",you:"你",male:"男性",female:"女性",human:"人类",yellow:"黄种人",white:"白种人",black:"黑种人",china:"中国",america:"美国",poor:"贫困",wellOff:"小康",middleClass:"中产",upperClass:"高产",wealthy:"富裕",unknown:"未知",none:"无",languageTalent:"语言表达",logicTalent:"数字逻辑",visualTalent:"视觉空间",musicTalent:"听觉声乐",interpersonalTalent:"人际交往",selfAwarenessTalent:"自我识别",natureTalent:"自然观察",physicalTalent:"身体运动",watchMode:"观看模式",classicMode:"手动模式",sandboxMode:"自由模式",challengeMode:"挑战模式",themeMode:"主题模式",anyTheme:"任意",normalTheme:"普通",xiuxianTheme:"修仙",martialArtsTheme:"武侠",cyberpunkTheme:"赛博朋克",superpowersTheme:"超能力",magicTheme:"魔法",interstellarScifiTheme:"星际科幻",wastelandSurvivalTheme:"废土求生",westernCowboyTheme:"西部牛仔",lifeScore:"人生得分",lifeTimes:"人生次数",lifeCoin:"点数",lifeDifficulty:"开局难度",statistic:"统计",achievement:"成就",endLife:"结束人生",nextYear:"下一年",stop:"暂停",play:"播放",replay:"重放",mannual:"手动",auto:"自动",resurrectWithCoin:"花费100点数复活！",resurrectWithAd:"观看广告复活！",endLifeWithRegret:"遗憾结束人生"}});a._RF.pop()}}}));

System.register("chunks:///_virtual/EventListTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Global.ts"],(function(e){"use strict";var t,n,i,o,r,s,l,h,a,c,v,g,p,d,f,C,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,i=e.createClass},function(e){o=e.cclegacy,r=e._decorator,s=e.Label,l=e.Mask,h=e.director,a=e.Button,c=e.EventHandler,v=e.UITransform,g=e.Sprite,p=e.RichText,d=e.Color,f=e.Component},function(e){C=e.translations},function(e){u=e.Global}],execute:function(){var m;o._RF.push({},"b30299i11hIyqz0y3Bbp6A5","EventListTile",void 0);var E=r.ccclass;r.property,e("EventListTile",E("EventListTile")(m=function(e){function o(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).lifeEvent=null,t.theme="",t.interactive=!1,t.clickEventHandler=null,t.backgroundColor=new d(96,96,96,255),t.textColor=new d("#FFFFFF"),t.padding=16,t.fontSize=24,t.lineHeight=48,t}t(o,e);var r=o.prototype;return r.start=function(){this.init()},r.init=function(){this.initEventRow(),this.interactive?this.initOptionRow():this.initResponseRow()},r.initEventRow=function(){var e=this.eventRow;e.active=!0;var t=e.getComponentInChildren(s);t.string=this.lifeEvent.age+"岁",t.color=this.textColor;for(var i,o=this.lifeEvent.description,r=this.lifeEvent.getValidEffectJsons(this.theme),h=e.getComponentInChildren(l).node,a="<color="+this.textColor.toCSS("#rrggbbaa")+">"+o+"</color>",c=0,v=n(r);!(i=v()).done;){var g=i.value;a+="  <color="+(0==g.positive?"#DB9600":g.positive>0?"#76A503":"#DB3228")+">"+g.label+"</color>",c+=g.label.length+1}this.setLabel(a,h,this.rowMaxWidth,o.length+c)},r.initResponseRow=function(){this.optionRow.active=!1;var e=this.responseRow;if(this.lifeEvent.response&&this.lifeEvent.options.length>0){e.active=!0;for(var t,i=e.getComponentInChildren(l).node,o="<color="+this.textColor.toCSS("#rrggbbaa")+">"+this.lifeEvent.response+"</color>",r=this.lifeEvent.selectedOption.getValidEffectJsons(this.theme),s=0,h=n(r);!(t=h()).done;){var a=t.value;o+="  <color="+(0==a.positive?"#DB9600":a.positive>0?"#76A503":"#DB3228")+">"+a.label+"</color>",s+=a.label.length+1}this.setLabel(o,i,this.rowMaxWidth,this.lifeEvent.response.length+s)}else e.active=!1},r.initOptionRow=function(){this.responseRow.active=!1;var e=this.optionRow;e.active=!0;for(var t,i=e.getComponentsInChildren(l),o=n(i);!(t=o()).done;){t.value.node.active=!1}var r=[];if(this.lifeEvent.options.length>0)r=this.lifeEvent.setAvailableOptions().map((function(e){return e.description}));else if(this.lifeEvent.isDead&&this.lifeEvent.isUniversal&&this.lifeEvent.age<45){var s=h.getScene().getComponentInChildren(u);r=[C.zhCN.endLifeWithRegret],s.saving.videoAdAvailable?r.unshift(C.zhCN.resurrectWithAd):s.saving.lifeCoin>s.lifeSetting.resurrectCost&&r.unshift(C.zhCN.resurrectWithCoin)}else r=[this.lifeEvent.isDead?C.zhCN.endLife:C.zhCN.nextYear];for(var c,v=0,g=n(this.lifeEvent.options);!(c=g()).done;){var p=c.value;p.description.length>v&&(v=p.description.length)}for(var d in r){var f=r[d],m=i[d].node;m.active=!0,this.setLabel(f,m,this.rowMaxWidth/r.length,v),m.getComponentInChildren(a).clickEvents=[this.cloneEventHandler(this.clickEventHandler,f)]}},r.cloneEventHandler=function(e,t){var n=new c;return n.target=e.target,n.component=e.component,n.handler=e.handler,n.customEventData=t,n},r.setLabel=function(e,t,n,i){var o=(i>0?i:e.length)*this.fontSize,r=Math.min(o,n),l=e==(this.lifeEvent.isDead?C.zhCN.endLife:C.zhCN.nextYear),h=l?1.5*this.padding:this.padding,a=l?this.lineHeight+h/2:this.lineHeight;t.getComponent(v).width=r+2*h,t.getComponent(v).height=Math.ceil(o/r)*a,t.parent.getComponent(v).height=t.getComponent(v).height;var c=t.children[0];c.getComponent(v).width=r+2*h,c.getComponent(v).height=Math.ceil(o/r)*a,c.getComponent(g).color=this.backgroundColor;var d=c.children[0];d.getComponent(s)?(d.getComponent(v).width=r,d.getComponent(s).string=e,d.getComponent(s).color=this.textColor):d.getComponent(p)&&(d.getComponent(p).maxWidth=r,d.getComponent(p).string=e)},i(o,[{key:"eventRow",get:function(){return this.node.getChildByName("EventRow")}},{key:"optionRow",get:function(){return this.node.getChildByName("OptionRow")}},{key:"responseRow",get:function(){return this.node.getChildByName("ResponseRow")}},{key:"rowMaxWidth",get:function(){return.8*this.node.getComponent(v).width}}]),o}(f))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LifeEvent.ts","./LifeSetting.ts","./DataUtils.ts","./CommonUtils.ts","./Achievement.ts","./Saving.ts","./Trait.ts","./Defines.ts"],(function(e){"use strict";var t,i,n,s,a,r,o,l,v,c,h,d,f,u,g,p,m,b;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,s=e._decorator,a=e.director,r=e.view,o=e.resources,l=e.Component},function(e){v=e.LifeEvent},function(e){c=e.LifeSetting},function(e){h=e.DataUtil},function(e){d=e.CommonUtils},function(e){f=e.Achievement},function(e){u=e.Saving},function(e){g=e.Trait},function(e){p=e.GameMode,m=e.translations,b=e.eventStyleProbs}],execute:function(){var y;n._RF.push({},"d7e2d4l8KpCw46vABjozpt6","Global",void 0);var E=s.ccclass;s.property,e("Global",E("Global")(y=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).screenWidth=void 0,t.screenHeight=void 0,t.dataUtil=void 0,t.saving=void 0,t.nextPageUrl="",t.lifeSetting=void 0,t.character=void 0,t.lifeEvents=void 0,t.initialCharacter=void 0,t.eventCaches=void 0,t.restartTraits=void 0,t.achievements=void 0,t.traits=void 0,t.universalEvents=void 0,t}t(n,e);var s=n.prototype;return s.onLoad=function(){var e=this;a.addPersistRootNode(this.node),this.dataUtil=new h,this.saving=new u;var t=r.getVisibleSize();this.screenWidth=t.width,this.screenHeight=t.height,this.achievements=[],o.load("achievements",(function(t,n){if(t)console.error(t);else for(var s=n.json,a=0,r=Object.keys(s);a<r.length;a++){for(var o,l=s[r[a]],v=!1,c=i(l.conditions);!(o=c()).done;){var h=o.value;if(-1!=h.indexOf("EVT?")||-1!=h.indexOf("TLT?")){v=!0;break}}v||e.achievements.push(new f(l,e.saving))}})),this.traits=[],o.load("traits",(function(t,i){if(t)console.error(t);else for(var n=i.json,s=0,a=Object.keys(n);s<a.length;s++){var r=a[s];e.traits.push(new g(n[r]))}})),this.universalEvents=[],o.load("universal-events",(function(t,i){if(t)console.error(t);else for(var n=i.json,s=0,a=Object.keys(n);s<a.length;s++){var r=a[s];e.universalEvents.push(n[r])}}))},s.loadJsonFile=function(e,t){o.load(e,(function(e,i){if(e)console.error(e);else{var n=i.json;t(n)}}))},s.initLife=function(e,t,i){this.lifeSetting=new c(this.saving,e,t,i),this.character=null,this.initialCharacter=null,this.lifeEvents=[],this.eventCaches=[],this.restartTraits=[]},s.restartLife=function(){this.lifeSetting=new c(this.saving,this.lifeSetting.gameMode,this.lifeSetting.challenge,this.lifeSetting.theme),this.character=null,this.initialCharacter=null,this.lifeEvents=[],this.eventCaches=[]},s.getNextUniversalEvent=function(e,t,n,s,a){for(var r,o={},l=i([].concat(e.backgroundJsons,e.stateJsons,e.attributeJsons));!(r=l()).done;){var c=r.value;o[c.label]=c.value}for(var h,f={},u=i(e.traitsWithEffect);!(h=u()).done;){f=h.value.updateEventProbs(f)}var g=t.gameMode==p[p.themeMode]?20:50,b=this.saving.getUniversalEvents(t.theme);b.length>g&&(b=b.slice(b.length-g));var y={};for(var E in this.universalEvents){var C,S=this.universalEvents[E];if((t.gameMode!=p[p.themeMode]||(null!=(C=S.theme)?C:"")==m.zhCN.anyTheme)&&((S.isDead||-1==b.indexOf(S.id.toString()))&&(!("conditions"in S)||d.checkConditions(o,S.conditions)))){var w=S.prob;if("isDead"in S&&S.isDead)w*=a?1:0;else{var D=S.id.toString();w*=(a?0:1)*(D in f?f[D]:1)}w>0&&(y[E]=w)}}var x=d.sampleFromProbDict(y),I=this.universalEvents[x],M={};if("effects"in I)for(var O,U=i(I.effects);!(O=U()).done;){var k=O.value;-1!=k.indexOf("+")?M[k.split("+")[0]]=parseInt(k.split("+")[1]):-1!=k.indexOf("-")&&(M[k.split("-")[0]]=-parseInt(k.split("-")[1]))}return new v({eventId:s,parentEventId:s,age:n,description:I.description,style:"通用的",weight:0,effects:M,options:[],conditions:"conditions"in I?I.conditions:[],isDecision:!1,isDead:"isDead"in I&&I.isDead})},s.getNextEvent=function(e,t,n,s){var a=this,r=n.theme,o=t[t.length-1],l=t[t.length-2];if(o.isDecision){var c=o.options.findIndex((function(e){return o.response==e.description})),h=o.segmentId+1+(0==c?0:c*(3*Math.pow(3,3-o.level)-1)/2);this.dataUtil.getEventsByOption(r,o.beginningId,h,c,(function(e,t){e?console.error(e):(a.eventCaches=a.eventCaches.concat(t),s(null,new v(t[0])))}))}else{var f=this.eventCaches.find((function(e){return e.parentEventId==o.eventId}));if(f.isDecision)if(n.gameMode==p[p.sandboxMode]&&o.level<=0){for(var u=[],g=0;u.length<4&&g<50;){var y=e.getBeginningId();-1==u.indexOf(y)&&u.push(y),g+=1}this.dataUtil.getLifeDecisions(r,o.level,u,(function(e,t){if(e)console.error(e);else{var i=t,a={};for(var r in i){var l=i[r].style;l=l.endsWith("的")?l:l+"的";for(var c=function(){var e=f[h];if(l in b[e]){var t=e;-1!=["imagination","horror","mystery"].indexOf(e)?t="imagination":-1!=["tragedy","story","adventure"].indexOf(e)&&(t="story");var s=n.lifeStyleJsons.findIndex((function(e){return e.key==t}));if(-1!=s){var v=n.lifeStyleJsons[s].value;a[r]=[.25,.5,1,2,4][v]}else a[r]=1;return i[r].beginningId==o.beginningId&&(a[r]*=2*(1+o.level)),"break"}},h=0,f=Object.keys(b);h<f.length;h++){if("break"===c())break}}var u=d.sampleFromProbDict(a);s(null,new v(i[u]))}}))}else s(null,new v(f));else if(!o.isUniversal&&f.age>o.age+1&&t.length>2&&!l.isDecision&&!l.isUniversal){if(!(f.age-o.age>=5||Math.random()<(n.gameMode==p[p.themeMode]?.3333:.6667)))return void s(null,new v(f));for(var E,C=this.lifeSetting.deathEventProb*e.getEventCategoryProbs().tragedy,S=i(e.traitsWithEffect);!(E=S()).done;){C=E.value.updateDeathProb(C,e)}e.attributes[m.zhCN.health]<=-10||e.attributes[m.zhCN.mentality]<=-10?C*=2:e.attributes[m.zhCN.health]<=0&&e.attributes[m.zhCN.mentality]<=0&&(C*=1.5),C=C>1?1:C<0?0:C;var w=Math.random()<C&&!this.lifeSetting.resurrected,D=Math.ceil((f.age-o.age)/2)+o.age;s(null,this.getNextUniversalEvent(e,n,D,o.eventId,w))}else s(null,new v(f))}},n}(l))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/GridTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoundRect.ts"],(function(e){"use strict";var t,n,o,i,r,l,a,s,d,c,u,p,h,g,C,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,s=e.Color,d=e.UITransform,c=e.resources,u=e.SpriteFrame,p=e.Sprite,h=e.Label,g=e.Button,C=e.Component},function(e){m=e.RoundRect}],execute:function(){var b,f,v,y,w,B,k,T,z,I,F,R,S;l._RF.push({},"e66a7/sHjtOmYC9fG8DE2EY","GridTile",void 0);var x=a.ccclass,G=a.property;e("GridTile",(b=x("GridTile"),f=G({}),v=G({}),y=G({}),w=G({}),B=G({}),b((z=t((T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"selected",z,i(t)),o(t,"icon",I,i(t)),o(t,"title",F,i(t)),o(t,"subtitle",R,i(t)),o(t,"background",S,i(t)),t.padding=8,t.backgroundColor=new s(160,160,160,224),t.selectedBackgroundColor=new s(224,224,224,255),t.textColor=new s(255,255,255),t.selectedTextColor=new s(255,255,255),t}n(t,e);var l=t.prototype;return l.start=function(){this.init()},l.init=function(){this.onSelected(this.selected);var e=this.node.getChildByName("Button"),t=e.getChildByName("Column"),n=this.node.getComponent(d).width,o=this.node.getComponent(d).height;e.getComponent(d).width=n,e.getComponent(d).height=o,t.getComponent(d).width=n-2*this.padding,t.getComponent(d).height=o-2*this.padding,this.node.getComponent(m).radius=Math.min(n,o)/8,this.background&&c.load(this.background,u,(function(t,n){e.getComponent(p).spriteFrame=n}));var i=t.getChildByName("Icon");this.icon?c.load(this.icon,u,(function(e,t){i.getComponent(p).spriteFrame=t})):i.active=!1;var r=t.getChildByName("Title");r.getComponent(h).string=this.title,r.getComponent(h).isBold=!0,r.getComponent(d).width=n-2*this.padding;var l=t.getChildByName("Subtitle");this.subtitle?(l.getComponent(h).string=this.subtitle,l.getComponent(d).width=n-2*this.padding):l.active=!1},l.addEventHandler=function(e){this.node.getComponentInChildren(g).getComponent(g).clickEvents.push(e)},l.onSelected=function(e){this.selected=e;for(var t,n=this.node.getComponentsInChildren(h),o=r(n);!(t=o()).done;){t.value.color=e?this.selectedTextColor:this.textColor}var i=this.node.getComponentInChildren(g),l=e?this.selectedBackgroundColor:this.backgroundColor;i.normalColor=l,i.disabledColor=new s(i.disabledColor.r,i.disabledColor.g,i.disabledColor.b,l.a)},t}(C)).prototype,"selected",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=t(T.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F=t(T.prototype,"title",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=t(T.prototype,"subtitle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=t(T.prototype,"background",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=T))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/LifeEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Defines.ts","./Character.ts"],(function(i){"use strict";var e,t,n,s,o,r;return{setters:[function(i){e=i.createForOfIteratorHelperLoose,t=i.createClass},function(i){n=i.cclegacy},function(i){s=i.CommonUtils},function(i){o=i.translations},function(i){r=i.Character}],execute:function(){n._RF.push({},"bc8ca5dcJdDpo1mhqGBB5z8","LifeEvent",void 0);i("LifeEvent",function(){function i(i){this.eventId=void 0,this.parentId=void 0,this.age=void 0,this.description=void 0,this.style=void 0,this.weight=void 0,this.effects=void 0,this.options=void 0,this.conditions=void 0,this.isDecision=void 0,this.isDead=void 0,this.beginningId=void 0,this.level=void 0,this.segmentId=void 0,this.optionIndex=void 0,this.uuid=void 0,this.response=void 0,this.availableOptions=void 0,this.eventId=i.eventId,this.parentId=i.parentEventId,this.age=i.age,this.description=i.description,this.style=i.style,this.weight=i.weight,this.effects=i.effects,this.options=[];for(var t,n=e(i.options);!(t=n()).done;){var s=t.value;this.options.push(new a(s,this))}this.conditions=i.conditions,this.isDecision=i.isDecision,this.isDead=i.isDead,this.beginningId=i.beginningId,this.level=i.level,this.segmentId=i.segmentId,this.optionIndex=i.optionIndex,this.uuid="",this.response="",this.availableOptions=null}var n=i.prototype;return n.getValidEffects=function(i){for(var e=this,t=r.getAttributes(i),n=["体格","体魄","身体","力量"],s=["智商","智力","智谋"],a=[o.zhCN.iq,o.zhCN.appearance,o.zhCN.eq,o.zhCN.physique,o.zhCN.social].concat(n,s),f={},d=function(){var i=h[c],r=e.effects[i];if(-1!=a.indexOf(i)){if(-1!=t.findIndex((function(e){return e.label==i})))f[i]=r;else if(-1!=n.indexOf(i)){var d=t.findIndex((function(i){return-1!=n.indexOf(i.label)}));-1!=d&&(f[t[d].label]=r)}else if(-1!=s.indexOf(i)){var l=t.findIndex((function(i){return-1!=s.indexOf(i.label)}));-1!=l&&(f[t[l].label]=i==o.zhCN.iq?Math.ceil(r/5):r)}}else f[i]=r},c=0,h=Object.keys(this.effects);c<h.length;c++)d();return f},n.getValidEffectJsons=function(i){for(var e=[],t=this.getValidEffects(i),n=0,s=Object.keys(t);n<s.length;n++){var o=s[n],r=t[o];if("string"==typeof r){var a=0;-1==r.indexOf("->")&&(a=-1!=r.indexOf("+")?1:-1!=r.indexOf("-")?-1:0),e.push({label:o+": "+r.toString(),positive:a})}else"number"==typeof r&&e.push({label:o+": "+(r>0?"+":"")+r.toString(),positive:r>0?1:-1})}return e},n.setAvailableOptions=function(){if(null!=this.availableOptions)return this.availableOptions;if(Math.random()<.4){for(var i,t={},n=e(this.options);!(i=n()).done;){var o=i.value;t[o.description]=o.score}var r=s.sampleFromProbDict(t);this.availableOptions=this.options.filter((function(i){return i.description!=r}))}else this.availableOptions=[].concat(this.options);return this.availableOptions},n.getAutoResponse=function(){for(var i,t={},n=e(this.options);!(i=n()).done;){var o=i.value;t[o.description]=1/o.score}return s.sampleFromProbDict(t)},n.isInteractive=function(i,e){return i&&(this.options.length>0||!e)||this.isDead},t(i,[{key:"selectedOption",get:function(){var i=this;return this.options.find((function(e){return i.response==e.description}))}},{key:"isUniversal",get:function(){return this.eventId==this.parentId}}]),i}());var a=i("LifeOption",function(){function i(i,e){var t;this.objectId=void 0,this.eventId=void 0,this.description=void 0,this.score=void 0,this.effects=void 0,this.objectId="",this.eventId=e.eventId,this.description=null!=(t=i.description)?t:"下一年",this.score=i.score,this.effects=i.effects}var e=i.prototype;return e.getValidEffects=function(i){for(var e=this,t=r.getAttributes(i),n=["体格","体魄","身体","力量"],s=["智商","智力","智谋"],a=[o.zhCN.iq,o.zhCN.appearance,o.zhCN.eq,o.zhCN.physique,o.zhCN.social].concat(n,s),f={},d=function(){var i=h[c],r=e.effects[i];if(-1!=a.indexOf(i)){if(-1!=t.findIndex((function(e){return e.label==i})))f[i]=r;else if(-1!=n.indexOf(i)){var d=t.findIndex((function(i){return-1!=n.indexOf(i.label)}));-1!=d&&(f[t[d].label]=r)}else if(-1!=s.indexOf(i)){var l=t.findIndex((function(i){return-1!=s.indexOf(i.label)}));-1!=l&&(f[t[l].label]=i==o.zhCN.iq?Math.ceil(r/5):r)}}else f[i]=r},c=0,h=Object.keys(this.effects);c<h.length;c++)d();return f},e.getValidEffectJsons=function(i){for(var e=[],t=0,n=Object.keys(this.getValidEffects(i));t<n.length;t++){var s=n[t],o=this.effects[s];if("string"==typeof o){var r=0;-1==o.indexOf("->")&&(r=-1!=o.indexOf("+")?1:-1!=o.indexOf("-")?-1:0),e.push({label:s+": "+o.toString(),positive:r})}else"number"==typeof o&&e.push({label:s+": "+(o>0?"+":"")+o.toString(),positive:o>0?1:-1})}return e},i}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LifeRestartPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts","./MainPage.ts","./Page.ts","./CharacterListTile.ts","./CharacterPanel.ts","./Global.ts","./CustomSlider.ts","./EventListTile.ts","./ListTile.ts","./Defines.ts","./CustomButton.ts","./CommonUtils.ts"],(function(e){"use strict";var t,i,n,a,r,o,l,s,h,c,d,u,g,v,C,f,m,p,S,P,R,L,T,y,B,b,k;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){a=e.cclegacy,r=e._decorator,o=e.find,l=e.director,s=e.RichText,h=e.Label,c=e.instantiate,d=e.Widget,u=e.UITransform,g=e.Slider,v=e.Button},function(e){C=e.Character},function(e){f=e.MainPage},function(e){m=e.Page},function(e){p=e.CharacterListTile},function(e){S=e.CharacterPanel},function(e){P=e.Global},function(e){R=e.CustomSlider},function(e){L=e.EventListTile},function(e){T=e.ListTile},function(e){y=e.translations,B=e.GameMode},function(e){b=e.CustomButton},function(e){k=e.CommonUtils}],execute:function(){var E;a._RF.push({},"6e7dfPFXZhJP4GpSNkG9d06","LifeRestartPage",void 0);var A=r.ccclass;r.property,e("LifeRestartPage",A("LifeRestartPage")(E=function(e){function a(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).ccClassName="LifeRestartPage",t.pageTitle="人生总结",t.scrollContentPath="Canvas/LifeRestartPage/ScrollView/view/content",t.buttonDataList=[{key:"RestartButton",label:"再来一世",handler:"onRestartButtonClicked"},{key:"ShareButton",label:"分享人生",handler:"onShareButtonClicked"},{key:"ShareBonusLabel",label:"完成今日首次分享，本次人生点数收益翻倍！",handler:null},{key:"ExitButton",label:"返回首页",handler:"onExitButtonClicked"}],t.saving=void 0,t.lifeSetting=void 0,t.lifeEvents=void 0,t.character=void 0,t.initialCharacter=void 0,t.shareRevenue=!1,t.videoAdRevenue=!1,t.selectedTraits=[],t}t(a,e);var r=a.prototype;return r.onLoad=function(){this.init(),this.backButton.active=!1;var e=o(this.scrollContentPath),t=l.getScene().getComponentInChildren(P);this.saving=t.saving,this.lifeSetting=t.lifeSetting,this.lifeEvents=t.lifeEvents,this.character=t.character,this.initialCharacter=t.initialCharacter,this.selectedTraits=[];var i=e.getChildByName("ScoreRichText"),n=this.character.getLifeScore(),a=n>80?"#76A503":n>60?"#DB9600":"#DB3228";i.getComponent(s).string="<color="+a+">"+n.toString()+"</color> <color="+this.textColor.toCSS("#rrggbb")+">分</color>";var r=e.getChildByName("AgeLabel");r.getComponent(h).string="第"+this.saving.lifeTimes.toString()+"世，享年"+this.character.age.toString()+"岁",r.getComponent(h).color=this.textColor,this.initPanelTitle(this.replayPanel.children[0],null),this.initReplayAgeSlider(),this.initRevenuePanel(!1);var d=this.traitPanel.children[0];for(var u in this.initPanelTitle(d,"保留"+this.lifeSetting.maxTraitInheritNum.toString()+"个特质，下辈子还能抽到"),this.character.traitsWithEffect)this.initTraitListTile(u,c(this.listTilePrefab));this.traitPanel.active=this.character.traitsWithEffect.length>0;var g=this.buttonColumn;for(var v in g.children){var C=this.buttonDataList[v];if(C.handler){var f=g.children[v].getComponent(b);f.node.active="ShareButton"!=C.key||this.isWeixin,f.label=C.label,f.addEventHandler(this.createEventHandler(C.handler,""))}else{var m=g.children[v].getComponent(h);m.node.active=this.isWeixin&&!k.isSameDay(this.saving.lastShareAt,new Date(Date.now())),m.string=C.label,m.color=this.textColor}}},r.initRevenuePanel=function(e){var t=this;this.lifeCoinLabel.getComponent(h).string=this.saving.lifeCoin.toString()+y.zhCN.lifeCoin,this.lifeCoinLabel.getComponent(h).color=this.textColor,this.lifeCoinLabel.parent.getComponent(d).right=this.margin;var n=this.revenuePanel.children[0];this.initPanelTitle(n.children[0],null),this.revenuePanel.removeAllChildren(),this.revenuePanel.addChild(n);for(var a,r=i(this.lifeRevenues);!(a=r()).done;){var o=a.value,l=c(this.listTilePrefab),s=l.getComponent(T);s.title=o.label,s.trailing="+"+o.value.toString()+y.zhCN.lifeCoin,this.revenuePanel.addChild(l)}var u=n.children[1].getChildByName("RewardedAdButton");if(u.active=this.saving.videoAdAvailable&&!this.videoAdRevenue,e||(u.getComponent(b).label="看广告翻倍！",u.getComponent(b).addEventHandler(this.createEventHandler("onRewardedAdButtonClicked",""))),!e){var g=n.children[1].getChildByName("UnlockButton");g.getComponent(b).label="前往使用",g.getComponent(b).addEventHandler(this.createEventHandler("onUnlockButtonClicked",""))}this.scheduleOnce((function(){n.children[1].getComponent(d).right=t.margin}))},r.initReplayAgeSlider=function(){var e=this.replayPanel.getChildByName("AgeCustomSlider"),t=e.getComponent(R);t.label="回放年龄",t.maxValue=this.character.age+1,t.sliderWidth=this.node.getComponent(u).width-240;for(var i=[],n=0;n<=this.character.age;n++)i.push(n.toString()+"岁");t.valueTexts=i;var a=this.createEventHandler("onReplayAgeSliderChanged","");e.getComponentInChildren(g).slideEvents.push(a),this.onReplayAgeSliderChanged(null,"")},r.initTraitListTile=function(e,t){var i=t,n=i.getComponent(T),a=this.character.traitsWithEffect[e].tileJson;n.avatar=a.avatar,n.title=a.title,n.trailing=a.trailing,n.backgroundColor=a.backgroundColor,n.selectedBackgroundColor=a.selectedBackgroundColor,n.getComponent(v).clickEvents.push(this.createEventHandler("onTraitListTileClicked",e)),this.traitPanel.addChild(i)},r.onReplayAgeSliderChanged=function(e,t){var n=this.replayPanel,a=n.getChildByName("AgeCustomSlider"),r=Math.floor(a.getComponentInChildren(g).progress*(this.character.age+1)),o=new C(this.initialCharacter,this.lifeSetting.theme);o.fromJson(this.initialCharacter);for(var l,s=this.lifeEvents[0],h=i(this.lifeEvents);!(l=h()).done;){var c=l.value;if(c.age>r)break;s.response&&s.options.length>0&&o.updateByEvent(s,!0),s=c,o.updateByEvent(c,!1)}var d=n.getChildByName("EventListTile").getComponent(L);d.lifeEvent=s,d.theme=this.lifeSetting.theme,d.interactive=!1,d.init();var u=n.getChildByName("CharacterListTile").getComponent(p);u.character=o,u.updateContent();var v=n.getChildByName("CharacterPanel").getComponent(S);v.character=o,v.updateContent()},r.onTraitListTileClicked=function(e,t){var i=t,n=this.character.traitsWithEffect[i],a=-1!=this.selectedTraits.findIndex((function(e){return e.id==n.id}));if(a||!(this.selectedTraits.length>=this.lifeSetting.maxTraitInheritNum)){var r=this.traitPanel.children[parseInt(i)+1];a?(r.getComponent(T).onSelected(!1),this.selectedTraits=this.selectedTraits.filter((function(e){return e.id!=n.id}))):(r.getComponent(T).onSelected(!0),this.selectedTraits.push(n))}},r.onRewardedAdButtonClicked=function(e,t){var i=this;this.watchRewardedVideo((function(e,t,n){if(e)console.error(e);else{var a=i.lifeRevenues[i.lifeRevenues.length-1].value;n?(i.videoAdRevenue=i.saving.videoAdToLifeRevenue(a,n),i.initRevenuePanel(!0)):t&&(i.videoAdRevenue=i.saving.videoAdToLifeRevenue(a,n))}}))},r.onUnlockButtonClicked=function(e,t){this.isWeixin;var i=this.node.parent.getComponent(f);l.getScene().getComponentInChildren(P).nextPageUrl=i.unlockPageUrl,i.switchScene(i.mainMenuScene)},r.onRestartButtonClicked=function(e,t){l.getScene().getComponentInChildren(P).restartTraits=this.selectedTraits;var i=this.node.parent.getComponent(f);i.switchScene(i.lifeSimulatorScene)},r.onShareButtonClicked=function(e,t){var i=this;if(this.isWeixin)wx.shareAppMessage({title:"这是我的"+this.character.getLifeScore()+"分"+(this.lifeSetting.gameMode==B[B.themeMode]?this.lifeSetting.theme:"")+"人生，快来体验由AI创造的独特人生！"}),this.scheduleOnce((function(){i.shareRevenue=i.shareRevenue||i.saving.shareLife(i.lifeRevenues[i.lifeRevenues.length-1].value),i.buttonColumn.getChildByName("ShareBonusLabel").getComponent(h).node.active=!k.isSameDay(i.saving.lastShareAt,new Date(Date.now())),i.initRevenuePanel(!0)}),2);else this.node.parent.getComponent(f)},r.onExitButtonClicked=function(e,t){var i=this.node.parent.getComponent(f);i.switchScene(i.mainMenuScene)},n(a,[{key:"replayPanel",get:function(){return o(this.scrollContentPath+"/ReplayPanel")}},{key:"revenuePanel",get:function(){return o(this.scrollContentPath+"/RevenuePanel")}},{key:"traitPanel",get:function(){return o(this.scrollContentPath+"/TraitPanel")}},{key:"buttonColumn",get:function(){return o(this.scrollContentPath+"/ButtonColumn")}},{key:"lifeCoinLabel",get:function(){return o("Canvas/LifeRestartPage/TopBar/Trailing/LifeCoinLabel")}},{key:"lifeRevenues",get:function(){var e=this.character.getLifeScore(),t=this.character.getLifeDifficulty();return this.lifeSetting.getLifeRevenues(e,t,this.shareRevenue,this.videoAdRevenue)}}]),a}(m))||E);a._RF.pop()}}}));

System.register("chunks:///_virtual/LifeSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Defines.ts","./Character.ts"],(function(e){"use strict";var t,i,r,a,n,h,s,o,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,i=e.createClass},function(e){r=e.cclegacy},function(e){a=e.CommonUtils},function(e){n=e.GameMode,h=e.translations,s=e.CharacterBackground,o=e.Talent},function(e){l=e.Character}],execute:function(){r._RF.push({},"3a1b1pDhQ1NBLXkLSwU1aiz","LifeSetting",void 0);e("LifeSetting",function(){function e(e,t,i,r){this.gameMode=n[n.classicMode],this.interactive=!1,this.customBackground=!1,this.unlimitedAttributes=!1,this.unlimitedTraits=!1,this.lifeWeight=2,this.comedyWeight=2,this.emotionWeight=2,this.philosophyWeight=2,this.storyWeight=2,this.imaginationWeight=2,this.theme="",this.challenge="",this.resurrected=!1,this.totalAttributeValue=0,this.traitNum=0,this.traitDrawNum=0,this.traitInheritNum=0,this.lowTraitRate=0,this.mediumTraitRate=0,this.highTraitRate=0,this.lifeRevenueRate=0,this.deathRate=0,this.moreOrigin=!1,this.moreTalent=!1,this.moreLowTrait=!1,this.moreMediumTrait=!1,this.moreHighTrait=!1,this.gameMode=t,this.unlimitedAttributes=!1,this.unlimitedTraits=!1,t==n[n.watchMode]?this.interactive=!1:t==n[n.classicMode]?this.interactive=!0:t==n[n.sandboxMode]?this.interactive=!1:t==n[n.challengeMode]?(this.interactive=!0,this.challenge=i):t==n[n.themeMode]&&(this.interactive=!0,this.theme=r),this.totalAttributeValue=e.getUnlockLevel("totalAttributeValue"),this.traitNum=e.getUnlockLevel("traitNum"),this.traitDrawNum=e.getUnlockLevel("traitDrawNum"),this.traitInheritNum=e.getUnlockLevel("traitInheritNum"),this.lowTraitRate=e.getUnlockLevel("lowTraitRate"),this.mediumTraitRate=e.getUnlockLevel("mediumTraitRate"),this.highTraitRate=e.getUnlockLevel("highTraitRate"),this.lifeRevenueRate=e.getUnlockLevel("lifeRevenueRate"),this.deathRate=e.getUnlockLevel("deathRate"),this.moreOrigin=e.getUnlockLevel("moreOrigin")>0,this.moreTalent=e.getUnlockLevel("moreTalent")>0,this.moreLowTrait=e.getUnlockLevel("moreLowTrait")>0,this.moreMediumTrait=e.getUnlockLevel("moreMediumTrait")>0,this.moreHighTrait=e.getUnlockLevel("moreHighTrait")>0}var r=e.prototype;return r.getCustomLifeCost=function(){var e=0;return e+=this.customBackground?100:0,e+=this.unlimitedAttributes?50:0,e+=this.unlimitedTraits?50:0},r.getTotalAttributeValue=function(e){if(this.unlimitedAttributes)return(this.gameMode==n[n.themeMode]?5:4)*this.maxAttributeValue;for(var i,r=this.maxAttributeValue+this.totalAttributeValue,a=t(e);!(i=a()).done;){r=i.value.updateInitialAttrValue(r)}return r},r.getTraits=function(e,t){var i={};for(var r in e){var n=e[r];if(n.theme==h.zhCN.anyTheme||(""==this.theme?h.zhCN.normalTheme:this.theme)==n.theme){var s=[1,.5,.25,.125][n.grade];4==n.grade?(s*=1+this.highTraitRate/100,s*=this.moreHighTrait?1:.05):3==n.grade?(s*=1+this.mediumTraitRate/100,s*=this.moreMediumTrait?1:.1):2==n.grade&&(s*=1+this.lowTraitRate/100,s*=this.moreLowTrait?1:.2),n.theme!=h.zhCN.anyTheme&&n.theme!=h.zhCN.normalTheme&&(s*=2),i[r]=s}else i[r]=0}for(var o=function(){var r=a.sampleFromProbDict(i),n=e[r];-1==t.findIndex((function(e){return e.id==n.id}))&&t.push(n)};t.length<this.maxTraitNum;)o();return t},r.getLifeRevenues=function(e,t,i,r){var a,s=(a={},a[n[n.watchMode]]=20,a[n[n.classicMode]]=30,a[n[n.challengeMode]]=40,a[n[n.sandboxMode]]=0,a[n[n.themeMode]]=20,a)[this.gameMode],o=Math.round(this.gameMode==n[n.sandboxMode]?0:30*t),l=e+o+s;l*=1+this.lifeRevenueRate/100,l=Math.ceil(l);var u=[{label:h.zhCN.lifeScore,value:e},{label:h.zhCN.lifeDifficulty,value:o},{label:h.zhCN[this.gameMode],value:s}];return i&&(u.push({label:"今日首次分享收益翻倍",value:l}),l*=2),r&&(u.push({label:"观看广告收益翻倍",value:l}),l*=2),u.push({label:"总"+h.zhCN.lifeCoin,value:l}),u},r.getBackgroundProb=function(e,t){if(e==s[s.gender])return 1;if(e==s[s.race])return 1;if(e==s[s.origin]){var i=[1.5,1.25,1,.75,.5][l.getOrigins(this.theme).findIndex((function(e){return e.key==t}))];return this.moreOrigin?i:i*i}return e==s[s.personality]?1:e==s[s.talent]&&t==o[o.none]?this.moreTalent?1:2:1},r.getBackgroundValues=function(e){var i=[];i=e==s[s.gender]?l.getGenders(this.theme):e==s[s.race]?l.getRaces(this.theme):e==s[s.nationality]?l.getNationalities(this.theme):e==s[s.origin]?l.getOrigins(this.theme):e==s[s.personality]?l.getPersonalities(this.theme):e==s[s.talent]?l.getTalents(this.theme):[];for(var r,a=t(i);!(r=a()).done;){var n=r.value;n.prob=this.getBackgroundProb(e,n.key)}return i},i(e,[{key:"lifeStyleJsons",get:function(){return[{key:"life",label:"生活",value:this.lifeWeight,values:["最低","低","中","高","最高"]},{key:"comedy",label:"笑点",value:this.comedyWeight,values:["最低","低","中","高","最高"]},{key:"emotion",label:"情感",value:this.emotionWeight,values:["最低","低","中","高","最高"]},{key:"philosophy",label:"深度",value:this.philosophyWeight,values:["最低","低","中","高","最高"]},{key:"story",label:"叙事",value:this.storyWeight,values:["最低","低","中","高","最高"]},{key:"imagination",label:"想象",value:this.imaginationWeight,values:["最低","低","中","高","最高"]}]}},{key:"maxAttributeValue",get:function(){return 20}},{key:"minIq",get:function(){return 60}},{key:"iqStep",get:function(){return 4}},{key:"maxTraitNum",get:function(){return 10+this.traitNum}},{key:"maxTraitDrawNum",get:function(){return this.unlimitedTraits?this.maxTraitNum:3+this.traitDrawNum}},{key:"maxTraitInheritNum",get:function(){return 1+this.traitInheritNum}},{key:"deathEventProb",get:function(){return.4*(1-this.deathRate/100)}},{key:"isMoreOrigin",get:function(){return this.moreOrigin}},{key:"isMoreTalent",get:function(){return this.moreTalent}},{key:"resurrectCost",get:function(){return 100}}]),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LifeSimulatorPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LifeEvent.ts","./MainPage.ts","./Character.ts","./Page.ts","./EventListTile.ts","./CharacterListTile.ts","./CharacterPanel.ts","./Global.ts","./CommonUtils.ts","./Defines.ts","./CustomButton.ts"],(function(t){"use strict";var e,i,n,a,s,r,l,h,o,c,u,p,v,f,g,d,C,y,S,P,E,m,L,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose,r=t.createClass},function(t){l=t.cclegacy,h=t._decorator,o=t.Prefab,c=t.director,u=t.find,p=t.ScrollView,v=t.instantiate},function(t){f=t.LifeEvent},function(t){g=t.MainPage},function(t){d=t.Character},function(t){C=t.Page},function(t){y=t.EventListTile},function(t){S=t.CharacterListTile},function(t){P=t.CharacterPanel},function(t){E=t.Global},function(t){m=t.CommonUtils},function(t){L=t.translations},function(t){B=t.CustomButton}],execute:function(){var b,N,T,w,z;l._RF.push({},"7c3b9a/zDRKF6m1AjzVaSIY","LifeSimulatorPage",void 0);var I=h.ccclass,k=h.property;t("LifeSimulatorPage",(b=I("LifeSimulatorPage"),N=k({type:o}),b((z=e((w=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).ccClassName="LifeSimulatorPage",e.pageTitle="你的人生",e.characterListTilePath="Canvas/LifeSimulatorPage/CharacterListTile",e.characterPanelPath="Canvas/LifeSimulatorPage/CharacterPanel",e.scrollContentPath="Canvas/LifeSimulatorPage/EventListView/view/content",e.saving=void 0,e.lifeSetting=void 0,e.character=void 0,e.initialCharacter=void 0,e.waitingEvent=!1,e.lifeEvents=[],e.replayLifeEvents=[],e.replaying=!1,e.defaultInterval=3,e.playSpeed=0,n(e,"eventListTilePrefab",z,a(e)),e}i(e,t);var l=e.prototype;return l.onLoad=function(){var t=this;this.init();var e=c.getScene().getComponentInChildren(E);this.saving=e.saving,this.lifeSetting=e.lifeSetting,this.character=e.character,this.initialCharacter=e.initialCharacter,u(this.characterListTilePath).getComponent(S).character=this.character,u(this.characterPanelPath).getComponent(P).character=this.character;var i=u(this.playButtonPath).getComponent(B);i.label=this.playerButtonLabel,i.addEventHandler(this.createEventHandler("onPlayButtonClicked","")),this.playSpeed=0,this.lifeSetting.interactive?i.node.active=this.saving.autoNextYearAvailable:(this.onPlayButtonClicked(null,""),this.waitingEvent=!0),this.lifeEvents=[],e.dataUtil.getBeginningEvents(this.lifeSetting.theme,this.character,(function(i,n){i?console.error(i):(e.eventCaches=n,t.lifeEvents=[new f(e.eventCaches[0])],t.addEventListTile(t.lifeEvents[0],t.lifeEvents[0].isInteractive(t.lifeSetting.interactive,t.autoNextYear)),t.waitingEvent=!1)}))},l.onBackButtonClicked=function(t,e){var i=this.node.parent.getComponent(g);i.switchScene(i.mainMenuScene)},l.onPlayButtonClicked=function(t,e){var i=u(this.playButtonPath).getComponent(B);i.label==L.zhCN.replay&&(this.replaying=!0,this.replayLifeEvents=[],u(this.scrollContentPath).removeAllChildren(),this.playSpeed=0);var n=this.replaying?this.autoReplay:this.autoPlay,a=this.replaying?this.replayLifeEvents:this.lifeEvents;if(this.playSpeed>=this.maxPlaySpeed){if(this.playSpeed=0,i.label=this.playerButtonLabel,i.init(),this.unschedule(n),!this.replaying&&this.lifeSetting.interactive&&a.length>0){var s=u(this.scrollContentPath),r=a[a.length-1],l=s.getChildByUuid(r.uuid).getComponent(y);l.interactive=r.isInteractive(this.lifeSetting.interactive,this.autoNextYear),l.init()}}else if(this.playSpeed=this.playSpeed>=1?2*this.playSpeed:1,i.label=this.playerButtonLabel,i.init(),this.unschedule(n),this.schedule(n,this.defaultInterval/this.playSpeed),!this.replaying&&this.lifeSetting.interactive&&1==this.playSpeed&&a.length>0){var h=u(this.scrollContentPath),o=a[a.length-1],c=h.getChildByUuid(o.uuid).getComponent(y);c.interactive=o.isInteractive(this.lifeSetting.interactive,this.autoNextYear),c.init()}},l.autoPlay=function(){if(!this.waitingEvent){var t=this.lifeEvents[this.lifeEvents.length-1];if(t.isDead)this.unschedule(this.autoPlay);else{var e="";if(t.options.length>0)if(this.autoNextYear)this.unschedule(this.autoPlay);else{this.waitingEvent=!0;for(var i,n={},a=s(t.options);!(i=a()).done;){var r=i.value;n[r.description]=1/r.score}e=m.sampleFromProbDict(n),this.onEventOptionButtonClicked(null,e)}else e=L.zhCN.nextYear,this.onEventOptionButtonClicked(null,e)}}},l.autoReplay=function(){if(this.replayLifeEvents.length>0){var t=this.replayLifeEvents[this.replayLifeEvents.length-1];if(t.response&&t.options.length>0)u(this.scrollContentPath).getChildByUuid(t.uuid).getComponent(y).initResponseRow()}var e=this.lifeEvents[this.replayLifeEvents.length];this.replayLifeEvents.push(e),this.addEventListTile(e,e.isInteractive(this.lifeSetting.interactive,!0));this.resetCharacter(this.replayLifeEvents);if(this.replayLifeEvents[this.replayLifeEvents.length-1].isDead){this.replaying=!1,this.unschedule(this.autoReplay);var i=u(this.playButtonPath).getComponent(B);return i.label=L.zhCN.replay,void i.init()}},l.onEventOptionButtonClicked=function(t,e){var i=this,n=e,a=u(this.scrollContentPath),s=this.lifeEvents[this.lifeEvents.length-1],r=a.getChildByUuid(s.uuid);if(!this.replaying)if(n!=L.zhCN.resurrectWithAd){if(n==L.zhCN.resurrectWithCoin)return this.lifeSetting.resurrected=this.saving.resurrectCost(this.lifeSetting),void(this.lifeSetting.resurrected&&this.resurrect());if(n!=L.zhCN.endLife&&n!=L.zhCN.endLifeWithRegret)this.responseToEvent(n,r),this.waitingEvent&&this.scheduleOnce((function(){u(i.scrollContentPath).parent.parent.getComponent(p).scrollToBottom(.5)})),c.getScene().getComponentInChildren(E).getNextEvent(this.character,this.lifeEvents,this.lifeSetting,(function(t,e){var n=e;if(i.character.updateByEvent(n,!1),u(i.characterListTilePath).getComponent(S).updateContent(),u(i.characterPanelPath).getComponent(P).updateContent(),i.lifeEvents.push(n),i.addEventListTile(n,n.isInteractive(i.lifeSetting.interactive,i.autoNextYear)),i.waitingEvent=!1,s.options.length>0&&i.autoNextYear&&i.schedule(i.autoPlay,i.defaultInterval/i.playSpeed),n.isDead){var a=u(i.playButtonPath).getComponent(B);a.node.active=!0,a.label=L.zhCN.replay,a.init()}}));else this.endLife()}else this.watchRewardedVideo((function(t,e,n){t?console.error(t):n?(i.lifeSetting.resurrected=i.saving.videoAdToResurrection(n),i.resurrect()):e&&(i.lifeSetting.resurrected=i.saving.videoAdToResurrection(n))}))},l.addEventListTile=function(t,e){var i=v(this.eventListTilePrefab);t.uuid=i.uuid;var n=i.getComponent(y);n.lifeEvent=t,n.theme=this.lifeSetting.theme,n.interactive=e,n.clickEventHandler=this.createEventHandler("onEventOptionButtonClicked","");var a=u(this.scrollContentPath);a.addChild(i),this.scheduleOnce((function(){a.parent.parent.getComponent(p).scrollToBottom(.5)}))},l.responseToEvent=function(t,e){var i=e.getComponent(y).lifeEvent;t&&i.options.length>0&&(i.response=t,this.character.updateByEvent(i,!0),u(this.characterListTilePath).getComponent(S).updateContent(),u(this.characterPanelPath).getComponent(P).updateContent()),e.getComponent(y).initResponseRow()},l.endLife=function(){var t=c.getScene().getComponentInChildren(E);t.lifeEvents=this.lifeEvents,t.saving.saveLife(this.lifeEvents,this.character,this.lifeSetting);var e=this.node.parent.getComponent(g);e.pushPage(e.lifeRestartPage)},l.resetCharacter=function(t){var e=new d(this.initialCharacter,this.lifeSetting.theme);e.fromJson(this.initialCharacter);for(var i,n=s(t);!(i=n()).done;){var a=i.value;e.updateByEvent(a,!1),a.response&&a.options.length>0&&e.updateByEvent(a,!0)}var r=u(this.characterListTilePath).getComponent(S);r.character=e,r.updateContent();var l=u(this.characterPanelPath).getComponent(P);return l.character=e,l.updateContent(),e},l.resurrect=function(){var t=u(this.scrollContentPath),e=this.lifeEvents[this.lifeEvents.length-1],i=t.getChildByUuid(e.uuid);this.lifeEvents.pop(),t.removeChild(i),this.character=this.resetCharacter(this.lifeEvents);var n=u(this.playButtonPath).getComponent(B);if(n.label=this.playerButtonLabel,n.init(),this.playSpeed>0)this.schedule(this.autoPlay,this.defaultInterval/this.playSpeed);else if(this.lifeSetting.interactive){var a=u(this.scrollContentPath),s=this.lifeEvents[this.lifeEvents.length-1],r=a.getChildByUuid(s.uuid).getComponent(y);r.interactive=s.isInteractive(this.lifeSetting.interactive,this.autoNextYear),r.init()}},r(e,[{key:"playButtonPath",get:function(){return"Canvas/LifeSimulatorPage/CharacterListTile/PlayButton"}},{key:"maxPlaySpeed",get:function(){return this.replaying||this.lifeSetting.interactive||this.saving.playSpeed4Available?4:2}},{key:"autoNextYear",get:function(){return this.saving.autoNextYearAvailable&&this.lifeSetting.interactive&&this.playSpeed>0}},{key:"playerButtonLabel",get:function(){return this.replaying?this.playSpeed>0?"×"+this.playSpeed.toString()+L.zhCN.replay:L.zhCN.stop+"中":this.lifeSetting.interactive?this.playSpeed>0?"×"+this.playSpeed.toString()+L.zhCN.auto+"中":L.zhCN.mannual+"中":this.playSpeed>0?"×"+this.playSpeed.toString()+L.zhCN.play+"中":L.zhCN.stop+"中"}}]),e}(C)).prototype,"eventListTilePrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=w))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/ListTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,r,a,l,s,h,g,d,u,p,c,C,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,s=t.Color,h=t.resources,g=t.SpriteFrame,d=t.Sprite,u=t.Label,p=t.UITransform,c=t.Layout,C=t.Button,m=t.Component}],execute:function(){var b,y,v,f,w,B,T,S,L,N,z;a._RF.push({},"e5c63CyxV9KKpkeWpOD5sS5","ListTile",void 0);var F=l.ccclass,x=l.property;t("ListTile",(b=F("ListTile"),y=x({}),v=x({}),f=x({}),w=x({}),b((S=e((T=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"avatar",S,o(e)),n(e,"title",L,o(e)),n(e,"subtitle",N,o(e)),n(e,"trailing",z,o(e)),e.backgroundColor=new s(128,128,128,224),e.selectedBackgroundColor=new s(192,192,192,255),e.textColor=new s(255,255,255),e.selectedTextColor=new s(255,255,255),e.titleFontSize=26,e.subTitleFontSize=22,e}i(e,t);var a=e.prototype;return a.start=function(){this.init()},a.init=function(){this.onSelected(!1);var t=this.node.getChildByName("Row"),e=t.getChildByName("Avatar");this.avatar?h.load(this.avatar,g,(function(t,i){e.getComponent(d).spriteFrame=i})):e.active=!1;var i=t.getChildByName("Content");i.getChildByName("Title").getComponentInChildren(u).string=this.title;var n=i.getChildByName("Subtitle");this.subtitle?n.getComponentInChildren(u).string=this.subtitle:n.active=!1,t.getChildByName("Trailing").getComponent(u).string=this.trailing,this.updateLayout()},a.updateLayout=function(){var t=this.node.getChildByName("Row"),e=t.getChildByName("Avatar"),i=t.getChildByName("Content"),n=i.getChildByName("Title"),o=i.getChildByName("Subtitle"),r=this.subtitle?o.getComponent(p).height:0;t.getComponent(p).height=n.getComponent(p).height+r,this.node.getComponent(p).height=n.getComponent(p).height+r;var a=t.getChildByName("Trailing");a.getComponent(p).width=this.trailing.length*this.subTitleFontSize;var l=Math.max(this.title.length*this.titleFontSize,this.subtitle.length*this.subTitleFontSize);l=Math.max(l,t.getComponent(p).width-(e.active?e.getComponent(p).width+t.getComponent(c).spacingX:0)-a.getComponent(p).width-t.getComponent(c).spacingX-t.getComponent(c).paddingLeft-t.getComponent(c).paddingRight),i.getComponent(p).width=l,n.getComponent(p).width=l,o.getComponent(p).width=l},a.addEventHandler=function(t){this.node.getComponent(C).clickEvents.push(t)},a.onSelected=function(t){for(var e,i=this.node.getComponentsInChildren(u),n=r(i);!(e=n()).done;){e.value.color=t?this.selectedTextColor:this.textColor}var o=this.node.getComponent(C),a=t?this.selectedBackgroundColor:this.backgroundColor;o.normalColor=a,o.disabledColor=new s(o.disabledColor.r,o.disabledColor.g,o.disabledColor.b,a.a)},e}(m)).prototype,"avatar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=e(T.prototype,"title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=e(T.prototype,"subtitle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=e(T.prototype,"trailing",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=T))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonUtils.ts","./DataUtils.ts","./Defines.ts","./Global.ts","./MainPage.ts","./Page.ts","./CharacterListTile.ts","./CharacterPanel.ts","./CustomButton.ts","./CustomSlider.ts","./EventListTile.ts","./GridTile.ts","./ListTile.ts","./RoundRect.ts","./Tabbar.ts","./TreeGraphAnimation.ts","./WeixinPopup.ts","./CustomCharacterPage.ts","./CustomLifePage.ts","./LifeRestartPage.ts","./LifeSimulatorPage.ts","./ChallengePage.ts","./SettingPage.ts","./StartPage.ts","./StatisticPage.ts","./ThemePage.ts","./UnlockPage.ts","./Achievement.ts","./Character.ts","./LifeEvent.ts","./LifeSetting.ts","./Saving.ts","./Trait.ts","./debug-view-runtime-control.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Defines.ts"],(function(e){"use strict";var a,t,s,i,r,n,h,g,c,m,o,l,u,p,P;return{setters:[function(e){a=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){i=e.cclegacy,r=e._decorator,n=e.find,h=e.director,g=e.Sprite,c=e.resources,m=e.SpriteFrame,o=e.Color,l=e.Component},function(e){u=e.Global},function(e){p=e.GameMode,P=e.translations}],execute:function(){var f;i._RF.push({},"27cb7T6KYVJIq37bOqnWB7N","MainPage",void 0);var C=r.ccclass;r.property,e("MainPage",C("MainPage")(f=function(e){function i(){for(var a,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(a=e.call.apply(e,[this].concat(s))||this)._pages=[],a._sceneName="",a.mainMenuScene="main-menu",a.startPageUrl="Canvas/StartPage",a.challengePageUrl="Canvas/ChallengePage",a.themePageUrl="Canvas/ThemePage",a.unlockPageUrl="Canvas/UnlockPage",a.statisticPageUrl="Canvas/StatisticPage",a.sharePageUrl="Canvas/SharePage",a.settingPageUrl="Canvas/SettingPage",a.lifeSimulatorScene="life-simulator",a.customLifePageUrl="Canvas/CustomLifePage",a.customCharacterPageUrl="Canvas/CustomCharacterPage",a.lifeSimulatorPage="Canvas/LifeSimulatorPage",a.lifeRestartPage="Canvas/LifeRestartPage",a}a(i,e);var r=i.prototype;return r.onLoad=function(){this.initScene()},r.pushPage=function(e){this._pages.length>0&&(n(this._pages[this._pages.length-1]).active=!1),this._pages.push(e),n(e).active=!0,this._sceneName==this.mainMenuScene&&this.setBackground(this.getBackgroundUrl(e))},r.popPage=function(){if(this._pages.length>1){n(this._pages[this._pages.length-1]).active=!1,this._pages.pop();var e=this._pages[this._pages.length-1];n(e).active=!0,this._sceneName==this.mainMenuScene&&this.setBackground(this.getBackgroundUrl(e))}},r.clearPages=function(){for(var e,a=t(this._pages);!(e=a()).done;){var s=e.value;n(s).active=!1}this._pages=[]},r.switchScene=function(e){h.loadScene(e)},r.initScene=function(){this.clearPages();var e=h.getScene();this._sceneName=e.name;var a=e.getComponentInChildren(u);if(this._sceneName==this.mainMenuScene)this.pushPage(this.startPageUrl),a.nextPageUrl==this.unlockPageUrl?(this.pushPage(this.unlockPageUrl),a.nextPageUrl=""):a.nextPageUrl==this.themePageUrl&&(this.pushPage(this.themePageUrl),a.nextPageUrl="");else if(this._sceneName==this.lifeSimulatorScene){a.restartLife();var t,s=a.lifeSetting.gameMode;if(s==p[p.watchMode])this.pushPage(this.customCharacterPageUrl),t="images/start/watchMode/spriteFrame";else if(s==p[p.classicMode])this.pushPage(this.customCharacterPageUrl),t="images/start/classicMode/spriteFrame";else if(s==p[p.sandboxMode])this.pushPage(this.customLifePageUrl),t="images/start/sandboxMode/spriteFrame";else if(s==p[p.themeMode]){var i,r;this.pushPage(this.customCharacterPageUrl),t=null!=(i=(r={},r[P.zhCN.xiuxianTheme]="images/theme/xiuxianTheme/spriteFrame",r[P.zhCN.martialArtsTheme]="images/theme/martialArtsTheme/spriteFrame",r[P.zhCN.cyberpunkTheme]="images/theme/cyberpunkTheme/spriteFrame",r[P.zhCN.superpowersTheme]="images/theme/superpowersTheme/spriteFrame",r[P.zhCN.magicTheme]="images/theme/magicTheme/spriteFrame",r[P.zhCN.interstellarScifiTheme]="images/theme/interstellarScifiTheme/spriteFrame",r[P.zhCN.wastelandSurvivalTheme]="images/theme/wastelandSurvivalTheme/spriteFrame",r[P.zhCN.westernCowboyTheme]="images/theme/westernCowboyTheme/spriteFrame",r)[a.lifeSetting.theme])?i:"images/theme/unknownTheme/spriteFrame"}else this.pushPage(this.customCharacterPageUrl),t="images/start/watchMode/spriteFrame";this.setBackground(t)}},r.getBackgroundUrl=function(e){var a;return(a={},a[this.startPageUrl]="images/start/watchMode/spriteFrame",a[this.themePageUrl]="images/start/themeMode/spriteFrame",a[this.unlockPageUrl]="images/start/unlock/spriteFrame",a[this.statisticPageUrl]="images/start/statistic/spriteFrame",a[this.sharePageUrl]="images/start/watchMode/spriteFrame",a[this.settingPageUrl]="images/start/watchMode/spriteFrame",a)[e]},r.setBackground=function(e){var a=h.getScene().getChildByName("Canvas").getChildByName("Background").getComponent(g);c.load(e,m,(function(e,t){a.spriteFrame=t,a.color=new o(255,255,255,96)}))},s(i,[{key:"pageLength",get:function(){return this._pages.length}}]),i}(l))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/Page.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./MainPage.ts","./GridTile.ts","./ListTile.ts","./Tabbar.ts","./CustomButton.ts"],(function(e){"use strict";var t,n,o,i,r,a,l,c,s,d,u,g,h,C,p,f,b,m,v,k,T,y,B,x,w,P,E,S,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){l=e.cclegacy,c=e._decorator,s=e.Prefab,d=e.resources,u=e.Asset,g=e.director,h=e.UITransform,C=e.Label,p=e.EventHandler,f=e.instantiate,b=e.Widget,m=e.Layout,v=e.Button,k=e.ScrollView,T=e.Color,y=e.sys,B=e.Component},function(e){x=e.Global},function(e){w=e.MainPage},function(e){P=e.GridTile},function(e){E=e.ListTile},function(e){S=e.Tabbar},function(e){L=e.CustomButton}],execute:function(){var H,F,I,z,A,G,M,V,D;l._RF.push({},"9c5f14qAMVBNr0cCgXX23BK","Page",void 0);c.ccclass;var R=c.property;e("Page",(H=R({type:s}),F=R({type:s}),I=R({type:s}),z=R({type:s}),G=t((A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).ccClassName=void 0,t.pageTitle="",t.pageTabs=[],o(t,"gridTilePrefab",G,i(t)),o(t,"listTilePrefab",M,i(t)),o(t,"tabbarPrefab",V,i(t)),o(t,"weixinPopupPrefab",D,i(t)),t}n(t,e);var l=t.prototype;return l.start=function(){this.isWeixin&&(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),d.load("images/share/cover",u,(function(e,t){wx.onShareAppMessage((function(){return{title:"打开无限人生模拟器，与AI一起体验无数人生！",imageUrl:t.nativeUrl}}))})))},l.init=function(){var e=g.getScene().getComponentInChildren(x).screenHeight;this.node.getComponent(h).height=e;var t=this.backButton;t&&(t.getComponent(L).label="返回",t.getComponent(L).addEventHandler(this.createEventHandler("onBackButtonClicked","")));var n=this.topBarCenter.getComponentInChildren(C);this.pageTabs.length>1?(n.node.active=!1,this.initTabbar(this.topBarCenter,this.pageTabs)):this.pageTitle&&(n.node.active=!0,n.string=this.pageTitle,n.color=this.textColor)},l.createEventHandler=function(e,t){var n=new p;return n.target=this.node,n.component=this.ccClassName,n.handler=e,n.customEventData=t,n},l.onBackButtonClicked=function(e,t){var n=this.node.parent.getComponent(w);n.pageLength>1?n.popPage():n.switchScene(n.mainMenuScene)},l.initTabbar=function(e,t){var n=f(this.tabbarPrefab);n.getComponent(S).tabs=t;var o=[];for(var i in t)o.push(this.createEventHandler("onTabbarClicked",i));n.getComponent(S).clickEventHandlers=o,e.addChild(n),this.onTabbarClicked(null,"0")},l.onTabbarClicked=function(e,t){},l.initPanelTitle=function(e,t){t&&(e.getComponent(C).string=t),e.getComponent(C).color=this.textColor,e.getComponent(C).fontSize=this.largeFontSize,e.getComponent(b).left=this.margin},l.initGridView=function(e,t,n,o,i){var a=e.getComponent(m);a.type=m.Type.GRID,a.constraint=m.Constraint.FIXED_COL,a.constraintNum=n,a.paddingLeft=this.margin,a.paddingRight=this.margin,a.spacingX=this.padding,a.spacingY=this.padding;for(var l,c=r(t);!(l=c()).done;){var s=l.value,d=f(this.gridTilePrefab);d.getComponent(h).width=(this.node.getComponent(h).width-(n-1)*this.padding-2*this.margin)/n,d.getComponent(h).height=d.getComponent(h).width/o;var u=d.getComponent(P);u.selected="selected"in s&&s.selected,u.icon=s.icon,u.title=s.title,u.subtitle=s.subtitle,u.background=s.background,u.backgroundColor="backgroundColor"in s?s.backgroundColor:u.backgroundColor,u.selectedBackgroundColor="selectedBackgroundColor"in s?s.selectedBackgroundColor:u.selectedBackgroundColor,u.textColor="textColor"in s?s.textColor:u.textColor,u.selectedTextColor="selectedTextColor"in s?s.selectedTextColor:u.selectedTextColor,i?u.addEventHandler(this.createEventHandler("onGridTileClicked","key"in s?s.key:s.title)):d.getComponentInChildren(v).interactable=!1,e.addChild(d)}e.parent.parent.on("scrolling",this.onScrolling,this)},l.initListView=function(e,t,n){for(var o,i=r(t);!(o=i()).done;){var a=o.value,l=f(this.listTilePrefab),c=l.getComponent(E);c.avatar=a.avatar,c.title=a.title,c.subtitle=a.subtitle,c.trailing=a.trailing,c.backgroundColor="backgroundColor"in a?a.backgroundColor:c.backgroundColor,c.selectedBackgroundColor="selectedBackgroundColor"in a?a.selectedBackgroundColor:c.selectedBackgroundColor,c.textColor="textColor"in a?a.textColor:c.textColor,c.selectedTextColor="selectedTextColor"in a?a.selectedTextColor:c.selectedTextColor,n?c.addEventHandler(this.createEventHandler("onListTileClicked","key"in a?a.key:a.title)):l.getComponent(v).interactable=!1,e.addChild(l)}e.parent.parent.on("scrolling",this.onScrolling,this)},l.onGridTileClicked=function(e,t){},l.onListTileClicked=function(e,t){},l.onScrolling=function(){for(var e=this.node.getComponentsInChildren(k).find((function(e){return e.node.active})),t=e.node.getChildByPath("view/content"),n=t.getComponent(m).constraintNum,o=t.children,i=e.node.getComponent(h).height,r=e.getScrollOffset().y,a=r+i,l=0,c=0;c<o.length;c++){var s=o[c],d=s.getComponent(h).height;if(c%n==0&&(l+=d),l+i<r)s.children.forEach((function(e){return e.active=!1}));else{if(l-d-i>a){for(var u=c;u<o.length;u++)o[u].children.forEach((function(e){return e.active=!0}));break}s.children.forEach((function(e){return e.active=!0}))}}},l.watchRewardedVideo=function(e){if(this.isWeixin){var t=wx.createRewardedVideoAd({adUnitId:"adunit-e54dff5d92184b16"});g.getScene().getComponentInChildren(x).saving.tryWatchVideoAd(),t.onError((function(e){console.log(e)})),t.onLoad((function(){console.log("激励视频 广告加载成功")})),this.scheduleOnce((function(){t.show().catch((function(n){t.load().then((function(){return t.show()})).catch((function(t){console.log("激励视频 广告显示失败"),e(null,!1,!1)}))}))}),.04),t.onClose((function(t){console.log("激励视频 广告观看成功");var n=t&&t.isEnded||void 0===t;e(null,!0,n)}))}},a(t,[{key:"backButton",get:function(){return this.node.getChildByPath("TopBar/Leading/BackButton")}},{key:"topBarCenter",get:function(){return this.node.getChildByPath("TopBar/Center")}},{key:"padding",get:function(){return 16}},{key:"margin",get:function(){return 24}},{key:"textColor",get:function(){return new T("#FFFFFF")}},{key:"largeFontSize",get:function(){return 26}},{key:"mediumFontSize",get:function(){return 24}},{key:"isWeixin",get:function(){return"WECHAT_GAME"===y.platform}}]),t}(B)).prototype,"gridTilePrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(A.prototype,"listTilePrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(A.prototype,"tabbarPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(A.prototype,"weixinPopupPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A));l._RF.pop()}}}));

System.register("chunks:///_virtual/RoundRect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,i,o,c,a,u,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.CCInteger,u=t.Mask,s=t.UITransform,p=t.Component}],execute:function(){var l,f,d,h,v;o._RF.push({},"b3793LdfzFBvYciwXv0OhIk","RoundRect",void 0);var R=c.ccclass,y=c.property;t("RoundRect",(l=R("RoundRect"),f=y({type:a}),l((v=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,r(e,"radius",v,i(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.init()},o.onEnable=function(){this.init()},o.init=function(){var t=this;setTimeout((function(){var e=t.node.getComponent(u);e.type=u.Type.GRAPHICS_RECT;var n=t.getComponent(s),r=n.width,i=n.height,o=n.anchorX,c=n.anchorY,a=e.subComp;a.clear();var p=-r*o,l=-i*c;a.roundRect(p,l,r,i,t.radius||16),a.fill()}),20)},e}(p)).prototype,"radius",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),d=h))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/Saving.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Character.ts","./Defines.ts","./CommonUtils.ts"],(function(t){"use strict";var e,i,s,n,a,o,r,l,h,u,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){s=t.cclegacy,n=t.sys},function(t){a=t.Character},function(t){o=t.CharacterState,r=t.CharacterBackground,l=t.CharacterAttribute,h=t.translations,u=t.GameMode},function(t){c=t.CommonUtils}],execute:function(){s._RF.push({},"65baf7AIF1L2LkgSDgGA8TY","Saving",void 0);t("Saving",function(){function t(){this._lifeTimes=void 0,this._lifeScore=void 0,this._totalLifeCoin=void 0,this._lifeCoin=void 0,this._unlocks={},this._lastUnlockSpeed4At=void 0,this._lastUnlockAutoNextYearAt=void 0,this._lastShareAt=void 0,this._lastWatchAdAt=void 0,this._todayAdNum=void 0,this._todayTryAdNum=void 0,this.beginnings={},this.universalEvents={},this.traitsWithEffect={},this.statistics={},this.defaultTheme=h.zhCN.normalTheme,this.load()}var s=t.prototype;return s.load=function(){var t=n.localStorage.getItem("saving"),e=t?JSON.parse(t):{lifeTimes:0,lifeScore:0,lifeCoin:100,totalLifeCoin:0,unlocks:{},lastUnlockSpeed4At:null,lastUnlockAutoNextYearAt:null,lastShareAt:null,lastWatchAdAt:null,todayAdNum:0,todayTryAdNum:0,beginnings:{},universalEvents:{},traitsWithEffect:{},statistics:{}};this._lifeTimes=e.lifeTimes,this._lifeScore=e.lifeScore,this._lifeCoin=e.lifeCoin,this._totalLifeCoin=e.totalLifeCoin,this._unlocks=e.unlocks,this._lastUnlockSpeed4At=e.lastUnlockSpeed4At,this._lastUnlockAutoNextYearAt=e.lastUnlockAutoNextYearAt,this._lastShareAt=e.lastShareAt,this._lastWatchAdAt=e.lastWatchAdAt,this._todayAdNum=e.todayAdNum,this._todayTryAdNum=e.todayTryAdNum,c.isSameDay(this.lastWatchAdAt,new Date(Date.now()))||(this._todayAdNum=0,this._todayTryAdNum=0),this.beginnings=e.beginnings,this.universalEvents=e.universalEvents,this.traitsWithEffect=e.traitsWithEffect,this.statistics=e.statistics},s.save=function(){n.localStorage.setItem("saving",JSON.stringify({lifeTimes:this._lifeTimes,lifeScore:this._lifeScore,lifeCoin:this._lifeCoin,totalLifeCoin:this._totalLifeCoin,unlocks:this._unlocks,lastUnlockSpeed4At:this._lastUnlockSpeed4At,lastUnlockAutoNextYearAt:this._lastUnlockAutoNextYearAt,lastShareAt:this._lastShareAt,lastWatchAdAt:this._lastWatchAdAt,todayAdNum:this._todayAdNum,todayTryAdNum:this._todayTryAdNum,beginnings:this.beginnings,universalEvents:this.universalEvents,traitsWithEffect:this.traitsWithEffect,statistics:this.statistics}))},s.getBeginnings=function(t){var e;return null!=(e=this.beginnings[""==t?this.defaultTheme:t])?e:[]},s.getUniversalEvents=function(t){var e;return null!=(e=this.universalEvents[""==t?this.defaultTheme:t])?e:[]},s.getTraitsWithEffect=function(t){var e;return null!=(e=this.traitsWithEffect[""==t?this.defaultTheme:t])?e:{}},s.getStatistics=function(t){var e;return null!=(e=this.statistics[""==t?this.defaultTheme:t])?e:{}},s.setBeginnings=function(t,e){this.beginnings[""==e?this.defaultTheme:e]=t},s.setUniversalEvents=function(t,e){this.universalEvents[""==e?this.defaultTheme:e]=t},s.setTraitsWithEffect=function(t,e){this.traitsWithEffect[""==e?this.defaultTheme:e]=t},s.setStatistics=function(t,e){this.statistics[""==e?this.defaultTheme:e]=t},s.getNumberStatisticKeys=function(t){for(var i,s=["lifeScore",o[o.age],o[o.wealth],r[r.origin]],n=e(a.getAttributes(t));!(i=n()).done;){var l=i.value;s.push(l.key)}return s},s.getStringStatisticKeys=function(t){for(var i,s=[r[r.gender],r[r.race],r[r.nationality],r[r.personality],r[r.talent]],n=e(a.getStates(t));!(i=n()).done;){var o=i.value;"string"==o.type&&s.push(o.key)}return s},s.getArrayStatisticKeys=function(t){for(var i,s=[],n=e(a.getStates(t));!(i=n()).done;){var o=i.value;"string[]"==o.type&&s.push(o.key)}return s},s.getMaxStatistic=function(t,e){var i="max"+t[0].toUpperCase()+t.substring(1);return i in this.getStatistics(e)?this.getStatistics(e)[i]:0},s.getMinStatistic=function(t,e){var i="min"+t[0].toUpperCase()+t.substring(1);return i in this.getStatistics(e)?this.getStatistics(e)[i]:0},s.getAvgStatistic=function(t,e){var i="avg"+t[0].toUpperCase()+t.substring(1);return i in this.getStatistics(e)?this.getStatistics(e)[i]:0},s.getTotalAttributes=function(t,i){for(var s,n=0,o=this.getStatistics(i),r=e(a.getAttributes(i));!(s=r()).done;){var h=s.value,u=t+h.key[0].toUpperCase()+h.key.substring(1);h.key==l[l.iq]?n+=u in o?o[u]/10:0:n+=u in o?o[u]:0}return n},s.getUnlockLevel=function(t){return t in this._unlocks?this._unlocks[t]:0},s.getStatisticTileJsons=function(t){for(var i,s=this.getStatistics(t),n=("lifeTimes"in s?s.lifeTimes:0),a=[{key:"lifeTimes",avatar:"",title:"开启人生次数",subtitle:n+"/"+this._lifeTimes.toString(),trailing:n+"次"}],o=e(this.getNumberStatisticKeys(t));!(i=o()).done;){var l,u=i.value;a.push({key:u,avatar:"",title:null!=(l=h.zhCN[u])?l:u,subtitle:"最低："+c.formatNumber(this.getMinStatistic(u,t))+"    最高："+c.formatNumber(this.getMaxStatistic(u,t)),trailing:"平均："+c.formatNumber(this.getAvgStatistic(u,t))})}for(var f,v=e(this.getStringStatisticKeys(t).concat(this.getArrayStatisticKeys(t)));!(f=v()).done;){var d,g=f.value;if(g!=r[r.nationality]){for(var A=(g in s?s[g]:{}),m=[],y=0,S=Object.keys(A);y<S.length;y++){var _=S[y];m.push({key:_,value:A[_]})}m.sort((function(t,e){return e.value-t.value}));var k="";for(var C in m.slice(0,m.length>4?4:m.length))k+=m[C].key+"："+m[C].value+"次  ";m.length>4&&(k+="……"),a.push({key:g,avatar:"",title:null!=(d=h.zhCN[g])?d:g,subtitle:k.length>0?k:h.zhCN.none,trailing:""})}}return a},s.saveLife=function(t,i,s){var a=this.getBeginnings(s.theme),o=a.indexOf(t[0].beginningId);-1!=o&&a.splice(o,1),a.push(t[0].beginningId),this.setBeginnings(a,s.theme);for(var r,l=this.getUniversalEvents(s.theme),h=e(t);!(r=h()).done;){var c=r.value;if(c.isUniversal){var f=l.indexOf(c.eventId);-1!=f&&l.splice(f,1),l.push(c.eventId)}}this.setUniversalEvents(l,s.theme);for(var v,d=this.getTraitsWithEffect(s.theme),g=e(i.traitsWithEffect);!(v=g()).done;){var A=v.value.key;A in d?d[A]+=1:d[A]=0}this.setTraitsWithEffect(d,s.theme);var m=i.getLifeScore(),y=s.getLifeRevenues(m,i.getLifeDifficulty(),!1,!1);if(this._lifeCoin+=y[y.length-1].value,this._totalLifeCoin+=y[y.length-1].value,s.gameMode!=u[u.sandboxMode]){var S=this.lifeToStatistic(i,s);this.setStatistics(S,s.theme)}this.save(),"WECHAT_GAME"===n.platform&&wx.setUserCloudStorage({KVDataList:[{key:"times",value:this._lifeTimes.toString()},{key:"score",value:this._lifeScore.toString()},{key:"coin",value:this._totalLifeCoin.toString()}],success:function(t){console.log("upload success",t)},fail:function(t){console.log("upload fail",t)}})},s.lifeToStatistic=function(t,i){var s=this,n=[].concat(t.backgroundJsons,t.stateJsons,t.attributeJsons),a=this.getStatistics(i.theme);this._lifeTimes+=1,a.lifeTimes="lifeTimes"in a?a.lifeTimes:0,a.lifeTimes+=1;for(var o,l=function(){var e=o.value,i=0;if("lifeScore"==e){var l=t.getLifeScore();s._lifeScore+=l,i=t.getLifeScore()}else i=e==r[r.origin]?t.originIndex:n.find((function(t){return t.key==e})).value;var h="max"+e[0].toUpperCase()+e.substring(1),u="min"+e[0].toUpperCase()+e.substring(1),c="avg"+e[0].toUpperCase()+e.substring(1);a[h]=h in a?Math.max(i,a[h]):i,a[u]=u in a?Math.min(i,a[u]):i,a[c]=((c in a?a[c]*(a.lifeTimes-1):0)+i)/a.lifeTimes},h=e(this.getNumberStatisticKeys(i.theme));!(o=h()).done;)l();for(var u,c=function(){var t=u.value;a[t]=t in a?a[t]:{};var e=n.find((function(e){return e.key==t})).value;e in a[t]?a[t][e]+=1:a[t][e]=1},f=e(this.getStringStatisticKeys(i.theme));!(u=f()).done;)c();for(var v,d=function(){var t=v.value;a[t]=t in a?a[t]:{};for(var i,s=n.find((function(e){return e.key==t})).value,o=e(s);!(i=o()).done;){var r=i.value;r in a[t]?a[t][r]+=1:a[t][r]=1}},g=e(this.getArrayStatisticKeys(i.theme));!(v=g()).done;)d();return a},s.updateUnlock=function(t){return this._lifeCoin<t.cost||(this._unlocks[t.key]=this.getUnlockLevel(t.key)+1,t.level=this._unlocks[t.key],this._lifeCoin-=t.cost,this.save()),t},s.customLifeCost=function(t){return!(this._lifeCoin<t.getCustomLifeCost())&&(this._lifeCoin-=t.getCustomLifeCost(),this.save(),!0)},s.resurrectCost=function(t){return!(this._lifeCoin<t.resurrectCost)&&(this._lifeCoin-=t.resurrectCost,this.save(),!0)},s.shareLife=function(t){var e=!c.isSameDay(this.lastShareAt,new Date(Date.now()));return e&&(this._lifeCoin+=t,this._totalLifeCoin+=t),this._lastShareAt=Date.now(),this.save(),e},s.videoAdToLifeRevenue=function(t,e){return this.videoAdAvailable&&e&&(this._lifeCoin+=t,this._totalLifeCoin+=t),this._lastWatchAdAt=Date.now(),this._todayAdNum+=1,this.save(),e},s.videoAdToPlaySpeed4=function(t){return this.videoAdAvailable&&t&&(this._lastUnlockSpeed4At=Date.now()),this._lastWatchAdAt=Date.now(),this._todayAdNum+=1,this.save(),t},s.videoAdToAutoNextYear=function(t){return this.videoAdAvailable&&t&&(this._lastUnlockAutoNextYearAt=Date.now()),this._lastWatchAdAt=Date.now(),this._todayAdNum+=1,this.save(),t},s.videoAdToResurrection=function(t){return this._lastWatchAdAt=Date.now(),this._todayAdNum+=1,this.save(),t},s.tryWatchVideoAd=function(){return this._todayAdNum+=1,this.save(),!0},i(t,[{key:"lifeTimes",get:function(){return this._lifeTimes}},{key:"lifeCoin",get:function(){return this._lifeCoin}},{key:"lastShareAt",get:function(){return new Date(this._lastShareAt)}},{key:"lastWatchAdAt",get:function(){return new Date(this._lastWatchAdAt)}},{key:"videoAdAvailable",get:function(){return"WECHAT_GAME"===n.platform&&this._todayAdNum<=12&&this._todayTryAdNum<=20}},{key:"playSpeed4Available",get:function(){return this._lastUnlockSpeed4At&&Date.now()-this._lastUnlockSpeed4At<=72e5}},{key:"autoNextYearAvailable",get:function(){return this._lastUnlockAutoNextYearAt&&Date.now()-this._lastUnlockAutoNextYearAt<=72e5}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts"],(function(t){"use strict";var i,e,a,n,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,n=t.find},function(t){r=t.Page}],execute:function(){var l;e._RF.push({},"91219vKcKVArLsMyQ8IhP7P","SettingPage",void 0);var s=a.ccclass;a.property,t("SettingPage",s("SettingPage")(l=function(t){function e(){for(var i,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(i=t.call.apply(t,[this].concat(a))||this).ccClassName="SettingPage",i.pageTitle="设置",i.scrollViewPath="Canvas/SettingPage/ScrollView",i.fakeSettings=[{avatar:"",title:"深色模式",subtitle:"是否跟随系统开启深色模式",trailing:"跟随系统"},{avatar:"",title:"字体大小",subtitle:"调整字体大小",trailing:"中字体"},{avatar:"",title:"给应用评分",subtitle:"如果您喜欢我们的游戏，请在应用商店中给我们评分",trailing:""},{avatar:"",title:"帮助与反馈",subtitle:"查看游戏帮助和用户反馈",trailing:""},{avatar:"",title:"关于我们",subtitle:"了解我们，或与我们取得联系",trailing:""},{avatar:"",title:"更新日志",subtitle:"查看过往更新日志，包括新功能、修复的错误等",trailing:""},{avatar:"",title:"用户协议",subtitle:"阅读我们的最新用户协议",trailing:""},{avatar:"",title:"隐私政策",subtitle:"阅读我们的最新隐私政策",trailing:""}],i}i(e,t);var a=e.prototype;return a.onLoad=function(){this.init(),this.initListView(n(this.scrollViewPath+"/view/content"),this.fakeSettings,!0)},a.start=function(){},a.onListTileClicked=function(t,i){},e}(r))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/StartPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainPage.ts","./Defines.ts","./Global.ts","./Page.ts","./CustomButton.ts"],(function(t){"use strict";var e,a,i,n,o,r,s,c,l,g,u,d,p,h,m;return{setters:[function(t){e=t.inheritsLoose,a=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){n=t.cclegacy,o=t._decorator,r=t.find,s=t.director,c=t.Layout,l=t.UITransform,t.instantiate},function(t){g=t.MainPage},function(t){u=t.GameMode,d=t.translations},function(t){p=t.Global},function(t){h=t.Page},function(t){m=t.CustomButton}],execute:function(){var P;n._RF.push({},"6c879v4u0BJW7Y7/t9ZICqJ","StartPage",void 0);var f=o.ccclass;o.property,t("StartPage",f("StartPage")(P=function(t){function n(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).ccClassName="StartPage",e.topBarActionDataList=[],e.gridDataList=[{key:u[u.watchMode],icon:"FontAwesome/circle-play/spriteFrame",title:d.zhCN.watchMode,subtitle:"成为观察者，见证人生的起伏跌宕",trailing:"快速观看一段人生",background:"images/start/watchMode/spriteFrame"},{key:u[u.classicMode],icon:"FontAwesome/arrows-split-up-and-left/spriteFrame",title:d.zhCN.classicMode,subtitle:"选择不同的路线，体验多样人生",trailing:"你的人生由你做主",background:"images/start/classicMode/spriteFrame"},{key:u[u.sandboxMode],icon:"FontAwesome/sliders/spriteFrame",title:d.zhCN.sandboxMode,subtitle:"根据喜好，定制属于你自己的人生故事",trailing:"自定义你想要的人生",background:"images/start/sandboxMode/spriteFrame"},{key:u[u.themeMode],icon:"FontAwesome/table-cells-large/spriteFrame",title:d.zhCN.themeMode,subtitle:"探索各种独特的主题，发现有趣的人生故事",trailing:"人生太普通？选个主题吧",background:"images/start/themeMode/spriteFrame"},{key:"statistic",icon:"FontAwesome/chart-simple/spriteFrame",title:"统计与成就",subtitle:"查看你的统计数据和成就",trailing:"查看你的统计数据和成就",background:"images/start/statistic/spriteFrame"},{key:"unlock",icon:"FontAwesome/unlock/spriteFrame",title:"元人生",subtitle:"解锁更多开局和角色设定，给人生加点料",trailing:"给每段人生加点料",background:"images/start/unlock/spriteFrame"}],e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.init();r(this.topBarLeadingPath);var t=r(this.topBarActionsPath),e=r(this.graphAnimationPath),i=r(this.modeGridPath),n=s.getScene().getComponentInChildren(p).screenHeight,o=i.getComponent(c),g=(i.getComponent(l).width-o.paddingLeft-o.paddingRight-o.spacingX)/2,u=(n-t.getComponent(l).height-e.getComponent(l).height-o.paddingTop-o.paddingBottom-2*o.spacingY)/3;this.initGridView(i,this.gridDataList,2,g/u,!0);for(var d,h=a(this.topBarActionDataList);!(d=h()).done;){var P=d.value,f=t.getChildByName(P.key);f.active=!0;var C=f.getComponent(m);C.label=P.label,C.icon=P.icon;var k=this.createEventHandler("onTopBarButtonClicked",P.key);C.addEventHandler(k)}},o.onGridTileClicked=function(t,e){var a=this.node.parent.getComponent(g);if("unlock"==e)return this.isWeixin,void a.pushPage(a.unlockPageUrl);if("statistic"!=e){var i=e;i==u[u.challengeMode]?a.pushPage(a.challengePageUrl):i==u[u.themeMode]?a.pushPage(a.themePageUrl):i==u[u.storyMode]||(s.getScene().getComponentInChildren(p).initLife(e,null,null),a.switchScene(a.lifeSimulatorScene))}else a.pushPage(a.statisticPageUrl)},o.onTopBarButtonClicked=function(t,e){var a=this.node.parent.getComponent(g);"StatisticButton"==e?a.pushPage(a.statisticPageUrl):"ShareButton"==e?a.pushPage(a.sharePageUrl):"SettingButton"==e&&a.pushPage(a.settingPageUrl)},i(n,[{key:"topBarLeadingPath",get:function(){return"Canvas/StartPage/TopBar/Leading"}},{key:"topBarActionsPath",get:function(){return"Canvas/StartPage/TopBar/Trailing"}},{key:"graphAnimationPath",get:function(){return"Canvas/StartPage/GraphAnimation"}},{key:"modeGridPath",get:function(){return"Canvas/StartPage/ModeGrid"}}]),n}(h))||P);n._RF.pop()}}}));

System.register("chunks:///_virtual/StatisticPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./Global.ts","./Tabbar.ts","./Defines.ts"],(function(e){"use strict";var i,t,a,n,l,r,s,h,c,o,d,m;return{setters:[function(e){i=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,n=e._decorator,l=e.find,r=e.director,s=e.instantiate,h=e.Widget},function(e){c=e.Page},function(e){o=e.Global},function(e){d=e.Tabbar},function(e){m=e.translations}],execute:function(){var b;a._RF.push({},"864927ZsUVHYrzauRlrmc13","StatisticPage",void 0);var u=n.ccclass;n.property,e("StatisticPage",u("StatisticPage")(b=function(e){function a(){for(var i,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(i=e.call.apply(e,[this].concat(a))||this).ccClassName="StatisticPage",i.statisticScrollViewPath="Canvas/StatisticPage/StatisticScrollView",i.achievementScrollViewPath="Canvas/StatisticPage/AchievementScrollView",i.pageTabs=[{label:m.zhCN.statistic,url:i.statisticScrollViewPath,initialized:!1,themeHandler:"onStatisticTabbarClicked",theme:""},{label:m.zhCN.achievement,url:i.achievementScrollViewPath,initialized:!1,themeHandler:"onAchievementTabbarClicked",theme:""}],i.themeTabs=[{label:m.zhCN.normalTheme,initialized:!1},{label:m.zhCN.xiuxianTheme,initialized:!1},{label:m.zhCN.martialArtsTheme,initialized:!1},{label:m.zhCN.cyberpunkTheme,initialized:!1},{label:m.zhCN.superpowersTheme,initialized:!1},{label:m.zhCN.magicTheme,initialized:!1},{label:m.zhCN.interstellarScifiTheme,initialized:!1},{label:m.zhCN.wastelandSurvivalTheme,initialized:!1},{label:m.zhCN.westernCowboyTheme,initialized:!1}],i}i(a,e);var n=a.prototype;return n.onLoad=function(){this.init()},n.start=function(){},n.onTabbarClicked=function(e,i){for(var t in this.pageTabs){var a=t==i,n=this.pageTabs[t];l(n.url).active=a,a&&!n.initialized&&(n.initialized=!0,n.url==this.statisticScrollViewPath?this.initStatisticScrollView(!1):n.url==this.achievementScrollViewPath&&this.initAchievementScrollView(!1))}},n.initStatisticScrollView=function(e){var i=r.getScene().getComponentInChildren(o),t=this.pageTabs.find((function(e){return e.label==m.zhCN.statistic})),a=l(t.url+"/view/content");if(e){var n=a.children[0];a.removeAllChildren(),a.addChild(n)}else{var s=t.themeHandler;this.initThemeTabbar(a,this.themeTabs,s)}var h=t.theme;this.initListView(a,i.saving.getStatisticTileJsons(h),!0)},n.initAchievementScrollView=function(e){var i=r.getScene().getComponentInChildren(o),a=this.pageTabs.find((function(e){return e.label==m.zhCN.achievement})),n=l(a.url+"/view/content");if(e){var s=n.children[0],h=n.children[1];n.removeAllChildren(),n.addChild(s),n.addChild(h)}else{var c=a.themeHandler;this.initThemeTabbar(n,this.themeTabs,c)}for(var d,b=""==a.theme?m.zhCN.normalTheme:a.theme,u=[],v=t(i.achievements);!(d=v()).done;){var f=d.value;f.theme!=m.zhCN.anyTheme&&b!=f.theme||(f.satisfied=f.isSatisfied(i.saving),f.description=f.description.replace("（已达成）","")+(f.satisfied?"（已达成）":""),u.push(f.achievementTileJson))}this.initGridView(n,u,2,4/3,!0)},n.initThemeTabbar=function(e,i,t){var a=s(this.tabbarPrefab);a.getComponent(d).tabs=i;var n=[];for(var l in i)n.push(this.createEventHandler(t,i[l].label));a.getComponent(d).clickEventHandlers=n,e.getComponentInChildren(h).node.addChild(a)},n.onStatisticTabbarClicked=function(e,i){var t=this.pageTabs.findIndex((function(e){return e.label==m.zhCN.statistic}));this.pageTabs[t].theme!=i&&(this.pageTabs[t].theme=i,this.initStatisticScrollView(!0))},n.onAchievementTabbarClicked=function(e,i){var t=this.pageTabs.findIndex((function(e){return e.label==m.zhCN.achievement}));this.pageTabs[t].theme!=i&&(this.pageTabs[t].theme=i,this.initAchievementScrollView(!0))},a}(c))||b);a._RF.pop()}}}));

System.register("chunks:///_virtual/Tabbar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i,r,a,s,l,d,c,h,p,C;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Mask,r=t.Layout,a=t.instantiate,s=t.Label,l=t.Button,d=t.UITransform,c=t.Sprite,h=t.EventHandler,p=t.Color,C=t.Component}],execute:function(){var g;e._RF.push({},"7e440bRbFRF36qv3bTPie5r","Tabbar",void 0);var u=o.ccclass;o.property,t("Tabbar",u("Tabbar")(g=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).ccClassName="Tabbar",n.selectedIndex=0,n.tabs=[],n.clickEventHandlers=[],n.constraintNum=6,n.padding=0,n.fontSize=26,n.backgroundColor=new p(96,96,96,255),n.selectedBackgroundColor=new p(160,160,160,255),n.textColor=new p(255,255,255),n.selectedTextColor=new p(255,255,255),n}n(e,t);var o=e.prototype;return o.start=function(){this.init()},o.init=function(){var t=this.node.getComponentsInChildren(i);if(!(t.length==this.tabs.length&&this.tabs.length>1)){var n=this.node.getComponent(r);for(var e in n.spacingX=this.padding,this.tabs.length>this.constraintNum&&(n.type=r.Type.GRID,n.constraint=r.Constraint.FIXED_COL,n.constraintNum=this.constraintNum,n.spacingY=this.padding,n.paddingTop=this.padding,n.paddingBottom=this.padding),this.tabs){var o=this.tabs[e],h="0"==e?t[0].node:a(t[0].node),p=h.getComponentInChildren(s),C=h.getComponentInChildren(l);if(C.normalColor=this.backgroundColor,C.disabledColor=this.selectedBackgroundColor,p.string=o.label,o.label.length>2){var g=(o.label.length-2)*this.fontSize;p.node.getComponent(d).width+=g,h.getComponent(d).width=C.node.children[0].getComponent(d).width+g,C.node.getComponent(d).width=C.node.children[0].getComponent(d).width+g}o.icon||(C.node.getComponentInChildren(c).node.active=!1),"0"!=e&&this.node.addChild(h)}for(var u in this.tabs){var b=this.node.getComponentsInChildren(l)[u];b.clickEvents=[],b.clickEvents.push(this.createEventHandler("onTabButtonClicked",u)),this.clickEventHandlers.length>parseInt(u)&&b.clickEvents.push(this.clickEventHandlers[u])}this.onTabButtonClicked(null,"0")}},o.createEventHandler=function(t,n){var e=new h;return e.target=this.node,e.component=this.ccClassName,e.handler=t,e.customEventData=n,e},o.onTabButtonClicked=function(t,n){this.selectedIndex=parseInt(n);var e=this.node.getComponentsInChildren(l);for(var o in e)e[o].interactable=o!=n,e[o].getComponentInChildren(s).color=o==n?this.selectedTextColor:this.textColor},e}(C))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/ThemePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./MainPage.ts","./Global.ts","./Defines.ts"],(function(e){"use strict";var t,i,a,n,r,s,l,o,m,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,a=e._decorator,n=e.find,r=e.instantiate,s=e.director},function(e){l=e.Page},function(e){o=e.MainPage},function(e){m=e.Global},function(e){c=e.GameMode}],execute:function(){var u;i._RF.push({},"0e655edePdBf6/ij503IoxB","ThemePage",void 0);var g=a.ccclass;a.property,e("ThemePage",g("ThemePage")(u=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).ccClassName="ThemePage",t.pageTitle="主题",t.scrollViewPath="Canvas/ThemePage/ScrollView",t.themes=[{title:"修仙",subtitle:"体验升仙之路，掌握神奇的法术和超自然力量",trailing:0,background:"images/theme/xiuxianTheme/spriteFrame"},{title:"武侠",subtitle:"感受武学世界，在剑与刀的碰撞中挑战无数高手",trailing:0,background:"images/theme/martialArtsTheme/spriteFrame"},{title:"魔法",subtitle:"探索一个充满神秘生物、魔法和魔法器具的世界",trailing:0,background:"images/theme/magicTheme/spriteFrame"},{title:"超能力",subtitle:"打造超级英雄形象，使用超能力和装备拯救世界",trailing:0,background:"images/theme/superpowersTheme/spriteFrame"},{title:"赛博朋克",subtitle:"成为一名黑客或赏金猎人，进入黑暗的科技世界",trailing:0,background:"images/theme/cyberpunkTheme/spriteFrame"},{title:"星际科幻",subtitle:"成为一名星际船员或太空殖民者，尽情探索宇宙深处",trailing:0,background:"images/theme/interstellarScifiTheme/spriteFrame"},{title:"废土求生",subtitle:"成为末日世界的一名幸存者，在荒野中求生",trailing:0,background:"images/theme/wastelandSurvivalTheme/spriteFrame"},{title:"西部牛仔",subtitle:"成为一名牛仔，漫步在辽阔西部中，追求自由和冒险",trailing:0,background:"images/theme/westernCowboyTheme/spriteFrame"},{title:"更多主题",subtitle:"敬请期待!",trailing:0,background:"images/theme/unknownTheme/spriteFrame"}],t}t(i,e);var a=i.prototype;return a.onLoad=function(){this.init(),this.initGridView(n(this.scrollViewPath+"/view/content"),this.themes,2,1,!0)},a.start=function(){},a.onGridTileClicked=function(e,t){if(this.isWeixin){if("更多主题"!=t){s.getScene().getComponentInChildren(m).initLife(c[c.themeMode],null,t);var i=this.node.parent.getComponent(o);i.switchScene(i.lifeSimulatorScene)}}else{var a=r(this.weixinPopupPrefab);this.node.addChild(a)}},i}(l))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/Trait.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Defines.ts","./Global.ts","./Character.ts"],(function(t){"use strict";var e,i,n,s,r,o,a,h;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.director,s=t.Color},function(t){r=t.CommonUtils},function(t){o=t.translations},function(t){a=t.Global},function(t){h=t.Character}],execute:function(){i._RF.push({},"c1c243GfsVCebcwiiwYpUix","Trait",void 0);t("Trait",function(){function t(t){this.id=void 0,this.name=void 0,this.description=void 0,this.grade=void 0,this.theme=void 0,this.effects=void 0,this.conditions=void 0,this.used=void 0,this.load(t)}var i=t.prototype;return i.load=function(t){var e;this.id=t.id,this.name=t.name,this.description=t.description,this.grade=t.grade,this.theme=null!=(e=t.theme)?e:o.zhCN.anyTheme,this.effects="effects"in t?t.effects:[],this.conditions="conditions"in t?t.conditions:[],this.used="used"in t&&t.used},i.updateEventProbs=function(t){if(!this.used)return t;for(var e=0,i=Object.keys(this.effects);e<i.length;e++){var n=i[e],s=this.effects[n],r=n.substring(2);n.startsWith("事件")&&(t[r]=s)}return t},i.updateDeathProb=function(t,e){if(!this.used)return t;for(var i=0,n=Object.keys(this.effects);i<n.length;i++){var s=n[i],r=this.effects[s];if("年龄"==s&&e.age<=r){t=0;break}}return t},i.updateInitialAttrValue=function(t){for(var e=0,i=Object.keys(this.effects);e<i.length;e++){var n=i[e];"初始属性"==n&&(t+=this.effects[n])}return t},i.updateCharacter=function(t,e){var i=this;if(!this.used&&(this.theme==o.zhCN.anyTheme||(""==t.theme?o.zhCN.normalTheme:t.theme)==this.theme)&&r.checkConditions(e,this.conditions)){this.used=!0;for(var s=function(){var e=f[c],s=i.effects[e];if("初始属性"==e)return"continue";if("所有属性"==e)for(var r=0,o=Object.keys(t.attributes);r<o.length;r++){var u=o[r];t.updateByEffect(u,s)}else if("随机属性"==e){var d=Math.floor(Math.random()*Object.keys(t.attributes).length);t.updateByEffect(Object.keys(t.attributes)[d],s)}else if("随机特质"==e){var l=n.getScene().getComponentInChildren(a).traits.filter((function(t){return t.grade==s})),g=Math.floor(Math.random()*l.length);i.load(l[g])}else if("性别"==e)t.gender=s;else if("出身"==e){var v=h.getOrigins(t.theme),F=v.findIndex((function(e){return e.label==t.origin}))+s;F=F>=v.length?v.length-1:F>=0?F:0,t.origin=v[F].label}else{if(e.startsWith("事件")||"年龄"==e||"死亡率"==e)return"continue";t.updateByEffect(e,s)}},c=0,f=Object.keys(this.effects);c<f.length;c++)s()}},e(t,[{key:"tileJson",get:function(){var t=[new s(128,128,128),new s("#E5F7A0"),new s("#99ECFF"),new s("#FFE7A1")][this.grade];t.a=224;var e=[new s(192,192,192),new s("#F3FBCE"),new s("#CCF8FF"),new s("#FFF5D0")][this.grade];return e.a=255,{key:this.id,avatar:"",title:this.name,subtitle:"",trailing:this.description,grade:this.grade,theme:this.theme,effects:this.effects,conditions:this.conditions,used:this.used,backgroundColor:t,selectedBackgroundColor:e,textColor:new s("#FFFFFF"),selectedTextColor:new s("#FFFFFF")}}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/TreeGraphAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var i,n,t,a,e,s,r,h,p,l,m;return{setters:[function(o){i=o.inheritsLoose,n=o.createForOfIteratorHelperLoose},function(o){t=o.cclegacy,a=o._decorator,e=o.Graphics,s=o.Color,r=o.instantiate,h=o.resources,p=o.SpriteFrame,l=o.Sprite,m=o.Component}],execute:function(){var w;t._RF.push({},"12f8ddZEwJG3b7uMxPdWYjZ","TreeGraphAnimation",void 0);var v=a.ccclass;a.property,o("TreeGraphAnimation",v("TreeGraphAnimation")(w=function(o){function t(){for(var i,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(i=o.call.apply(o,[this].concat(t))||this).animating=!1,i.animationLevel=0,i.maxAnimationLevel=3,i.animationSteps=[{level:0,val:0,down:1,up:2,showNode:!0,showUp:!0,showDown:!0},{level:1,val:1,down:5,up:3,showNode:!0,showUp:!0,showDown:!0},{level:1,val:2,down:4,up:6,showNode:!0,showUp:!0,showDown:!0},{level:2,val:5,down:13,up:11,showNode:!0,showUp:!0,showDown:!0},{level:2,val:3,down:9,up:7,showNode:!0,showUp:!0,showDown:!0},{level:2,val:4,down:8,up:10,showNode:!0,showUp:!0,showDown:!0},{level:2,val:6,down:12,up:14,showNode:!0,showUp:!0,showDown:!0}],i.animationIcons=["baby-boy","kid-boy","kid-girl","teenager-boy-1","teenager-girl-1","teenager-boy-2","teenager-girl-2","man-1","woman-1","man-2","woman-2","man-3","woman-3","man-4","woman-4"],i}i(t,o);var a=t.prototype;return a.onLoad=function(){var o=this,i=this.getComponent(e);i.lineWidth=8,i.strokeColor=new s("#FFFFFF");var n=this.node.getChildByName("Sprite");for(var t in this.node.removeChild(n),this.animationIcons){var a=r(n);a.active=!1,this.node.addChild(a)}var m=function(){var i=o.node.children[w],n="images/avatar/"+o.animationIcons[w]+"/spriteFrame";h.load(n,p,(function(o,n){i.getComponent(l).spriteFrame=n}))};for(var w in this.animationIcons)m();this.startGraph(),this.animating=!0},a.update=function(o){this.animating&&(this.animationLevel+=1/180,this.animationLevel=this.animationLevel>=this.maxAnimationLevel+1?0:this.animationLevel,this.animationLevel<=0&&this.startGraph(),this.drawGraph(this.animationLevel))},a.startGraph=function(){for(var o,i=n(this.node.children);!(o=i()).done;){o.value.active=!1}var t=0,a=0;for(var e in this.animationSteps)if(0!=parseInt(e)){var s=this.animationSteps[e].level,r=this.animationSteps[e].val;s>t&&0==a&&(this.animationSteps[parseInt(e)-1].showNode=!0,t=s,a=0);var h=void 0;for(var p in this.animationSteps)if(this.animationSteps[p].down==r||this.animationSteps[p].up==r){h=this.animationSteps[p];break}this.animationSteps[e].showNode=!!h.showNode&&Math.random()<.7,h.showNode&&s==this.maxAnimationLevel-1?(this.animationSteps[e].showUp=Math.random()<.6,this.animationSteps[e].showDown=Math.random()<.6,this.animationSteps[e].showUp||this.animationSteps[e].showDown||(this.animationSteps[e].showUp=Math.random()<.5,this.animationSteps[e].showDown=!this.animationSteps[e].showUp)):(this.animationSteps[e].showUp=h.showNode,this.animationSteps[e].showDown=h.showNode),a+=this.animationSteps[e].showNode?1:0}},a.drawGraph=function(o){var i=this.getComponent(e);i.clear();var n=[-(80*this.maxAnimationLevel*2+36*this.maxAnimationLevel)/2,0],t=0,a=this.node.children[0];a.setPosition(n[0],n[1]),a.active=!0;for(var s=0;s<this.maxAnimationLevel;s++){var r=Math.pow(2,s),h=n[0]+178*s;if(s>=Math.floor(o+1))break;for(var p=0;p<r;p++){var l=n[1];s>0&&(l+=80*(p%2==0?1:-1)/Math.pow(2,s-1),l+=(p%2==0?1:-1)*Math.floor(p/2)*80/Math.pow(2,s-2));var m=this.animationSteps.find((function(o){return o.val==t&&o.showNode}));m&&this.drawGraphNode(i,[h,l],36,80,80/Math.pow(2,s),s+1-o,m),t+=1}}},a.drawGraphNode=function(o,i,n,t,a,e,s){if(o.moveTo(i[0]+n/2,i[1]),e>.5)return o.lineTo(i[0]+t*(1-e)/.5,i[1]),void o.stroke();if(o.lineTo(i[0]+t,i[1]),s.showDown)if(o.moveTo(i[0]+t,i[1]),e>0)o.lineTo(i[0]+t+t*(.5-e)/.5,i[1]+a*(.5-e)/.5);else{o.lineTo(i[0]+2*t,i[1]+a);var r=this.node.children[s.down];r.setPosition(i[0]+2*t+n/2,i[1]+a),r.active=!0}if(s.showUp)if(o.moveTo(i[0]+t,i[1]),e>0)o.lineTo(i[0]+t+t*(.5-e)/.5,i[1]-a*(.5-e)/.5);else{o.lineTo(i[0]+2*t,i[1]-a);var h=this.node.children[s.up];h.setPosition(i[0]+2*t+n/2,i[1]-a),h.active=!0}o.stroke()},t}(m))||w);t._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Page.ts","./ListTile.ts","./Global.ts","./Defines.ts","./CustomButton.ts"],(function(e){"use strict";var t,i,l,n,a,o,r,s,c,v,g,u,h,m,C,L,k;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,l=e.createClass},function(e){n=e.cclegacy,a=e._decorator,o=e.director,r=e.Label,s=e.Widget,c=e.find,v=e.instantiate,g=e.Button,u=e.UITransform},function(e){h=e.Page},function(e){m=e.ListTile},function(e){C=e.Global},function(e){L=e.translations},function(e){k=e.CustomButton}],execute:function(){var f;n._RF.push({},"d0669DzrE1M3aw/ywIad/Ek","UnlockPage",void 0);var d=a.ccclass;a.property,e("UnlockPage",d("UnlockPage")(f=function(e){function n(){for(var t,i=arguments.length,l=new Array(i),n=0;n<i;n++)l[n]=arguments[n];return(t=e.call.apply(e,[this].concat(l))||this).ccClassName="UnlockPage",t.pageTitle="元人生",t.scrollViewPath="Canvas/UnlockPage/ScrollView",t.unlockList=[{key:"totalAttributeValue",avatar:"",title:"初始属性和",subtitle:"开始人生时，角色初始的属性和+1",trailing:"升级",level:0,maxLevel:60,cost:1e3},{key:"traitDrawNum",avatar:"",title:"初始特质数量",subtitle:"开始人生时，角色初始的特质数量+1",trailing:"升级",level:0,maxLevel:5,cost:1e3},{key:"traitInheritNum",avatar:"",title:"可继承特质数量",subtitle:"重新开始人生时，角色可继承的特质数量+1",trailing:"升级",level:0,maxLevel:3,cost:2e3},{key:"lowTraitRate",avatar:"",title:"绿色特质爆率",subtitle:"2级特质出现的概率+1%",trailing:"升级",level:0,maxLevel:99,cost:100},{key:"mediumTraitRate",avatar:"",title:"蓝色特质爆率",subtitle:"3级特质出现的概率+1%",trailing:"升级",level:0,maxLevel:99,cost:200},{key:"highTraitRate",avatar:"",title:"橙色特质爆率",subtitle:"4级特质出现的概率+1%",trailing:"升级",level:0,maxLevel:99,cost:300},{key:"deathRate",avatar:"",title:"死亡率",subtitle:"意外死亡的概率-1%",trailing:"升级",level:0,maxLevel:99,cost:400},{key:"lifeRevenueRate",avatar:"",title:"人生收益",subtitle:"人生结束时，人生点数收益+1%",trailing:"升级",level:0,maxLevel:99,cost:500},{key:"moreLowTrait",avatar:"",title:"更多绿色特质",subtitle:"解锁所有2级特质",trailing:"解锁",level:0,maxLevel:1,cost:1e3},{key:"moreMediumTrait",avatar:"",title:"更多蓝色特质",subtitle:"解锁所有3级特质",trailing:"解锁",level:0,maxLevel:1,cost:2e3},{key:"moreHighTrait",avatar:"",title:"更多橙色特质",subtitle:"解锁所有4级特质",trailing:"解锁",level:0,maxLevel:1,cost:4e3},{key:"moreTalent",avatar:"",title:"更多天赋",subtitle:"解锁所有角色天赋",trailing:"解锁",level:0,maxLevel:1,cost:6e3},{key:"moreOrigin",avatar:"",title:"更多出身",subtitle:"解锁所有角色出身",trailing:"解锁",level:0,maxLevel:1,cost:8e3}],t}t(n,e);var a=n.prototype;return a.onLoad=function(){this.init();for(var e,t=o.getScene().getComponentInChildren(C),l=t.saving.lifeCoin,n=i(this.unlockList);!(e=n()).done;){var a=e.value;a.level=t.saving.getUnlockLevel(a.key)}this.lifeCoinLabel.getComponent(r).string=l.toString()+L.zhCN.lifeCoin,this.lifeCoinLabel.getComponent(r).color=this.textColor,this.lifeCoinLabel.parent.getComponent(s).right=this.margin,this.initUnlockListView(l)},a.initUnlockListView=function(e){var t=c(this.scrollViewPath+"/view/content"),l=t.children[0];t.removeAllChildren();for(var n,a=i(this.unlockList);!(n=a()).done;){var o=n.value,r=v(l);r.getComponent(g).interactable=!1,this.updateUnlockListTile(r,o,e),t.addChild(r)}t.removeChild(l)},a.updateUnlockListTile=function(e,t,i){var l=e.getComponent(m);l.avatar=t.avatar,l.title=t.title,"升级"==t.trailing?l.title+="（"+t.level.toString()+"/"+t.maxLevel.toString()+"级）":"购买"==t.trailing?l.title+="（"+t.level.toString()+"次）":"解锁"==t.trailing&&t.level<t.maxLevel&&(l.title+="（未解锁）"),l.subtitle=t.subtitle,l.trailing="XXXXXXXX",l.init();var n=t.level<t.maxLevel&&i>=t.cost,a=e.getChildByName("Row").getChildByName("CustomButton");a.getComponent(u).width=160,a.getComponent(u).height=60,a.getComponent(k).label=t.level<t.maxLevel?t.cost.toString()+L.zhCN.lifeCoin:{"升级":"已满级","购买":"已满","解锁":"已解锁"}[t.trailing],n?0==a.getComponentInChildren(g).clickEvents.length&&a.getComponentInChildren(g).clickEvents.push(this.createEventHandler("onListTileClicked",t.key)):a.getComponentInChildren(g).interactable=!1},a.onListTileClicked=function(e,t){var i=this,l=this.unlockList.findIndex((function(e){return e.key==t})),n=this.unlockList[l],a=o.getScene().getComponentInChildren(C);n=a.saving.updateUnlock(n);var v=a.saving.lifeCoin;this.lifeCoinLabel.getComponent(r).string=v.toString()+L.zhCN.lifeCoin,this.lifeCoinLabel.parent.getComponent(s).right=this.margin,this.scheduleOnce((function(){var e=c(i.scrollViewPath+"/view/content");for(var t in i.unlockList){n.level=a.saving.getUnlockLevel(n.key);var l=e.children[t];l.getComponent(g).interactable=!1,i.updateUnlockListTile(l,i.unlockList[t],v)}}))},l(n,[{key:"lifeCoinLabel",get:function(){return c("Canvas/UnlockPage/TopBar/Trailing/LifeCoinLabel")}}]),n}(h))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/WeixinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomButton.ts"],(function(n){"use strict";var e,t,o,r,i,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,r=n.EventHandler,i=n.Component},function(n){c=n.CustomButton}],execute:function(){var a;t._RF.push({},"a0c66c0nDdCCbqgiVWJnd+l","WeixinPopup",void 0);var s=o.ccclass;o.property,n("WeixinPopup",s("WeixinPopup")(a=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))||this).ccClassName="WeixinPopup",e}e(t,n);var o=t.prototype;return o.onLoad=function(){var n=this.node.children[0].children[0].children[1].getComponentInChildren(c);n.label="关闭",n.addEventHandler(this.createEventHandler("onCloseButtonClicked",""))},o.createEventHandler=function(n,e){var t=new r;return t.target=this.node,t.component=this.ccClassName,t.handler=n,t.customEventData=e,t},o.onCloseButtonClicked=function(n,e){this.node.destroy()},t}(i))||a);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});